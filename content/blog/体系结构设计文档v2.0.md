---
title: "需求规格说明文档"
author: [kunduin]
date: "2018-03-09"
---

# 体系结构设计文档

### v1.0.4 正式版

#### 软工小组第二组
---

### 更新历史

| 日期     | 更新者 | 更新内容                                       | 版本号 |
| -------- | ------ | ---------------------------------------------- | ------ |
| 17/10/11 | 吴新宇 | 创建文档，编写格式                             | v1.0.1 |
| 17/10/21 | 徐翔哲 | 编写业务逻辑层分解、数据层分解、信息视角       | v1.0.2 |
| 17/10/23 | 吴新宇 | 编写界面接口，整理文档                         | v1.0.3 |
| 17/11/04 | 吴新宇 | 新增presentUI,增加对商品、客户、银行账户的调用 | v1.0.4 |
| 17/11/04 | 徐翔哲 | 重整了一下数据层的包                           | v1.0.5 |
| 17/11/07 | 温曜铭 | 建立数据库表 | v1.0.6 |
| 17/11/08 | 温曜铭 | 修改数据库表 | v1.0.7 |
| 17/11/08 | 温曜铭 | 定义持久化数据 | v1.0.8 |
| 17/12/10 | 徐一舟 | 调整了许多废弃接口，新增了许多实现接口 | v1.0.9 |
| 18/01/12 | 徐一舟 | 整合了最终版 | v2.0.0 |

---
## 目录

- [1. 引言](#1-引言)
    - [1.1 编制目的](#11-编制目的)
    - [1.2 词汇表](#12-词汇表)
    - [1.3 参考资料](#13-参考资料)
- [2. 产品描述](#2-产品描述)
- [3. 逻辑视角](#3-逻辑视角)
- [4. 组合视角](#4-组合视角)
    - [4.1 开发包图](#41-开发包图)
    - [4.2 运行时进程](#42-运行时进程)
    - [4.3 物理部署](#43-物理部署)
- [5. 接口视角](#5-接口视角)
    - [5.1 模块的职责](#51-模块的职责)
    - [5.2 用户界面层](#52-用户界面层)
        - [5.2.1 用户界面层模块的职责](#521-用户界面层模块的职责)
        - [5.2.2 用户界面模块的接口规范](#522-用户界面模块的接口规范)
        - [5.2.3 用户界面模块设计原理](#523-用户界面模块设计原理)
    - [5.3 业务逻辑层的分解](#53-业务逻辑层的分解)
        - [5.3.1 业务逻辑层模块的职责](#531-业务逻辑层模块的职责)
        - [5.3.2 业务逻辑模块的接口规范](#532-业务逻辑模块的接口规范)
    - [5.4 数据层的分解](#54-数据层的分解)
- [6. 信息视角](#6-信息视角)
    - [6.1 数据持久化对象](#61-数据持久化对象)
    - [6.2 数据库表](#62-数据库表)



## 1. 引言

### 1.1 编制目的

### 1.2 词汇表


| 缩写或单词             | 解释             |
| ---------------------- | ---------------- |
| receipt                | 单据             |
| commodity              | 商品             |
| storage                | 库存             |
| alert                  | 报警             |
| client                 | 客户             |
| user                   | 用户             |
| purchase               | 进货             |
| sale                   | 销售             |
| return                 | 退货             |
| bankAccount            | 银行账户         |
| collection             | 收款             |
| payment                | 付款             |
| moneyReceipt           | 财务单据         |
| reimbursementReceipt   | 现金费用单       |
| systemAccount          | 期初建账的“账” |
| accountInitialization  | 期初建账         |
| notification           | 通知             |
| duplicateException     | 重复异常         |
| notFoundException      | 目标未找到异常   |
| undeletableException   | 无法删除异常     |
| present                | 赠送             |
| category               | 分类             |
| insufficientException  | 数量不足异常     |
| authorizationException | 身份验证异常     |
| alreadyLoginException  | 重复登录异常     |
| redo                   | 红冲             |


### 1.3 参考资料

- 《用例文档》
- 《需求规格说明文档》

## 2. 产品描述

参考《用例文档》对产品的描述

## 3. 逻辑视角

本系统采用分层体系结构的风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好的示意整个高层抽象。展示层包括GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责持久化数据访问。分层体系结构的逻辑视角如下图。

![layer](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/5594997b49d1b45a995dba1982037c9ffbfaa979/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/Layers.png)

## 4. 组合视角

### 4.1 开发包图

| 开发（物理）包 | 依赖的其他开发包 |
| -------------- | ---------------- |

![客户端包图](http://101.37.19.32:10080/gitHubakers/ERPnju/blob/master/doc/体系结构设计/设计模型图/ClientPackage.png)
![服务器包图](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/5594997b49d1b45a995dba1982037c9ffbfaa979/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/ServerPackage.png)


### 4.2 运行时进程

在本系统中，或有多个客户端进程和一个服务器进程，其进程如下图所示。结合部署图，客户端进程是在客户端机器上进行，服务器端进程是在服务器端机器上运行。

![进程图](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/6bdb297c32b6d26916fdd6f7067dd7748f9aa5b9/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/%E8%BF%9B%E7%A8%8B%E5%9B%BE.png)

### 4.3 物理部署

本系统中客户端构件是放在客户端机上，服务器端构件是放在服务器端机器上。部署图下图所示

![部署图](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/6bdb297c32b6d26916fdd6f7067dd7748f9aa5b9/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/DeploymentDiagram.png)

见文件夹设计模型图

### 4.4 展示层的分解

#### 4.4.1 ui 层设计概要

UI层跳转逻辑主要按照人员的性质来分，包括系统管理员，库存管理人员，销售人员，财务人员，总经理。

UI层的分包则主要按照功能点来划分。

UI层的入口是mainTrigger,显示打开的是设置ip界面，服务器在本地运行的话则直接进入下一界面，否则需要手动设置ip。

#### 4.4.2 ui 层内部包的职责与划分

- main包
    - jump 处理主跳转逻辑
    - admin 处理系统管理员跳转逻辑
    - financialstuff 处理财务人员跳转逻辑
    - generalmanager 处理总经理跳转逻辑
    - salesman 处理销售人员跳转逻辑
    - storagemanager 处理库存管理人员的跳转逻辑
    - factory 涉及人物身份的跳转逻辑创建工厂
- authorization包 处理人物权限
- accountui包 处理银行账户管理
- clientui包 处理客户管理
- communityui包 处理商品管理
- collectionui包 处理收款单
- judgereceipt包 处理审批逻辑
- messageui包 处理消息通知
- operationcondition包 处理经营状况表
- operationrecord包 处理经营历程表
- overflowui包 处理报溢单
- paymentui包 处理付款单
- presentui包 处理赠送单
- promotionui包 处理促销
- purchasereturn包 处理进货退货
- purchase包 处理进货
- reimburseui包 处理现金费用单
- saledetailui包 处理销售明细表
- salereturn包 处理销售退货单
- saleui包 处理销售单
- storagecheckui包 处理库存盘点
- storagebrowseui包 处理库存查看
- storagemanagement包 处理库存管理
- underflowui包 处理报损单
- utility包 存放各种工具类

## 5. 接口视角

### 5.1 模块的职责

客户端模块和服务器模块视图分别如下图。

![客户端模块](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/6bdb297c32b6d26916fdd6f7067dd7748f9aa5b9/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/ClientModule.png)

![服务器模块](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/6bdb297c32b6d26916fdd6f7067dd7748f9aa5b9/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/ServerModule.png)

**客户端各层的职责如下**

| 层             | 职责                                 |
| -------------- | ------------------------------------ |
| 启动模块       | 负责初始化网络通信机制，启动用户界面 |
| 用户界面层     | 基于窗口的系统客户端用户界面         |
| 客户端网络模块 | 利用java RMI机制查找RMI服务          |

**服务器各层的职责**

| 层               | 职责                                         |
| ---------------- | -------------------------------------------- |
| 启动模块         | 负责初始化网络通信，启动用户界面             |
| 业务逻辑层       | 对于用户界面的输入进行相应并进行业务处理逻辑 |
| 数据层           | 负责数据段持久化及数据访问接口               |
| 服务器端网络模块 | 利用java RMI机制开启查找RMI服务，注册RMI服务 |

**层之间调用的接口**

| 接口                      | 服务调用方         | 服务提供方         |
| ------------------------- | ------------------ | ------------------ |
| notificationService       | 客户端展示层       | 服务器端业务逻辑层 |
| clientService             | 客户端展示层       | 服务器端业务逻辑层 |
| commodityService          | 客户端展示层       | 服务器端业务逻辑层 |
| authorizationService      | 客户端展示层       | 服务器端业务逻辑层 |
| accountService            | 客户端展示层       | 服务器端业务逻辑层 |
| operationRecordService    | 客户端展示层       | 服务器端业务逻辑层 |
| operationConditionService | 客户端展示层       | 服务器端业务逻辑层 |
| saleDetailService         | 客户端展示层       | 服务器端业务逻辑层 |
| accountInitialization     | 客户端展示层       | 服务器端业务逻辑层 |
| promotionService          | 客户端展示层       | 服务器端业务逻辑层 |
| receiptJudgementService   | 客户端展示层       | 服务器端业务逻辑层 |
| userDAO                   | 服务器端业务逻辑层 | 服务器端数据层     |
| clientDAO                 | 服务器端业务逻辑层 | 服务器端数据层     |
| commodityDAO              | 服务器端业务逻辑层 | 服务器端数据层     |
| accountDAO                | 服务器端业务逻辑层 | 服务器端数据层     |
| promotionDAO              | 服务器端业务逻辑层 | 服务器端数据层     |
| notificationDAO           | 服务器端业务逻辑层 | 服务器端数据层     |
| systemAccount             | 服务器端业务逻辑层 | 服务器端数据层     |


### 5.2 用户界面层



根据需求，系统存在70个界面（加粗为主界面）：
- **登录界面** 
- **进货销售人员主界面**
    消息通知界面，信息详情页，单据制定选择界面，制定进货单界面，制定销售单界面，制定进货退货单界面，制定销售退货单界面，浏览客户信息界面，修改客户详细信息界面，查看客户详细信息界面，创建新客户界面
- **库存管理人员主界面**
    浏览商品信息界面，创建商品信息界面，修改商品或分类界面，查看商品信息界面，库存查看界面，库存盘点界面，导出Excel文件进程界面，库存报单选择界面，库存赠送单创建界面，库存报溢单创建界面，库存报损单创建界面，消息通知界面，信息详情页
- **财务人员主界面**
    浏览银行账户界面，创建银行账户界面，修改银行账户界面，单据选择界面，单据创建选择界面，制定现金费用单界面，制定收款单界面，制定付款单界面，单据查阅选择界面，查看经营状况表界面，查看经营历程表界面，查看销售明细表界面，红冲单据创建界面，浏览期初信息界面，银行账户信息界面，客户信息界面，商品账目信息界面，期初建账确认界面，消息通知界面，信息详情页
- **总经理主界面**
    选择单据查询界面，查看经营状况表界面，查看经营历程表界面，查看销售明细表界面，单据审批界面，待审批单据界面，单据详情界面，单据修改界面，单据提交确认界面，已审批单据界面，单据详情界面，浏览历史销售策略界面，历史销售策略详细信息界面，选择新的销售策略界面，VIP特殊优惠策略界面，捆绑销售策略界面，减免优惠策略界面
- **系统管理人员主界面**
    浏览所有用户界面，创建新用户界面，用户详细信息界面，修改用户信息界面

![页面跳转图](http://101.37.19.32:10080/gitHubakers/ERPnju/raw/6bdb297c32b6d26916fdd6f7067dd7748f9aa5b9/doc/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%9B%BE/interfaceJump.png)


#### 5.2.1 用户界面层模块的职责


---

| 模块                    | 职责                                                                                                     |
| ----------------------- | -------------------------------------------------------------------------------------------------------- |
| commodityUI             | 提供商品与商品分类的增删改查界面                                                                         |
| storageBrowseUI         | 提供根据时间查看库存的界面                                                                               |
| storageCheckUI          | 提供库存盘点的界面                                                                                       |
| storageManagementUI     | 提供库存类单据，包括报溢单和报损单的界面                                                                 |
| messageUI               | 提供用户相关的各项通知，包含报警单、待办事项、以及审批结果                                               |
| clientUI                | 提供与客户相关的增删改查服务                                                                             |
| purchaseUI                | 提供进货单填写与提交的界面                                                                               |
| saleUI                  | 提供销售单单填写与提交的界面                                                                             |
| purchaseReturnUI          | 提供进货退货单填写与提交的界面                                                                           |
| saleReturnUI            | 提供进货退货单填写与提交的界面                                                                           |
| accountUI               | 提供银行账户的增删查服务                                                                                 |
| collectionUI            | 提供收款单填写与提交的界面                                                                               |
| paymentUI               | 提供付款单填写与提交的界面                                                                               |
| reimbursementUI             | 提供现金费用单填写与提交的界面                                                                               |
| operationRecordUI       | 提供经营历程表的查看和导出服务，提供销售类单据、进货类单据、财务类单据、库存类单据的红冲和红冲并复制服务 |
| operationConditionUI    | 提供经营状况表的查看和导出服务                                                                           |
| saleDetailUI            | 提供销售明细表的查看和导出服务                                                                           |
| accountInitializationUI | 提供期初建账和账目查询服务                                                                               |
| judgeReceiptUI          | 提供单据审批服务（即查看所有单据和改变单据状态的服务）                                                   |
| promotionUI             | 提供促销策略的增删改查服务                                                                               |
| authorizationUI         | 提供用户的登录，增删改查服务                                                                             |
| presentUI               | 提供赠送单的填写与提交                                                                                   |
| UIutility               | 提供界面的启动与跳转服务                                                                                 |


#### 5.2.2 用户界面模块的接口规范

##### 5.2.2.1 commodityUI 模块的接口规范

### `需接口`

- **接口名**

```java
commodityUIController.getCommodityCategory(CommodityCategoryVO parent)
```
- **服务内容**
    - 获取商品分类

---

- **接口名**

```java
commodityUIController.addCommodityCategory(CommodityCategoryVO category) throws DuplicateException
```
- **服务内容**
    - 增加商品分类

---

- **接口名**

```java
commodityUIController.updateCommodityCategory(CommodityCategoryVO category) throws NotFoundExceptionthrows DuplicateException
```
- **服务内容**
    - 更新商品分类属性

---

- **接口名**

```java
commodityUIController.deleteCommodityCategory(CommodityCategoryVO category) throws UndeletableException,NotFoundException
```
- **服务内容**
    - 删除商品分类

---

- **接口名**

```java
commodityUIController.addCommodity(CommodityVO commodity) throws DuplicateException
```
- **服务内容**
    - 增加商品

---

- **接口名**

```java
commodityUIController.deleteCommodity(int ID) throws UndeletableException,NotFoundException
```
- **服务内容**
    - 删除商品

---

- **接口名**

```java
commodityUIController.updateCommodity(CommodityVO commodity) throws NotFoundException
```
- **服务内容**
    - 更新商品属性

---

- **接口名**

```java
commodityUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 获取满足条件的商品列表

---

##### 5.2.2.2 storageBrowseUI 模块的接口规范

### `需接口`

- **接口名**

```java
storageBrowseUIController.storageBrowse(Map<String,String> filter)
```
- **服务内容**
    - 获得符合条件的商品出入库数量与金额，销售进货的数量与金额

---

##### 5.2.2.3 storageCheckUI 模块的接口规范

### `需接口`

- **接口名**

```java
storageCheckUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 盘点当天的库存快照

---

##### 5.2.2.4 storageManagementUI 模块的接口规范

### `需接口`

- **接口名**

```java
storageManagementUIController.storageManagement(StorageReceiptVO storageReceipt) throws InsufficientException
```
- **服务内容**
    - 创建库存赠送单与库存报溢单

---

##### 5.2.2.5 messageUI 模块的接口规范

### `需接口`

- **接口名**

```java
messageUIController.getNotification(UserVO usr)
```
- **服务内容**
    - 获取通知

---

##### 5.2.2.6 clientUI 模块的接口规范

### `需接口`

- **接口名**

```java
clientUIController.addClient(ClientVO client) throws DuplicateException
```
- **服务内容**
    - 增加客户

---

- **接口名**

```java
clientUIController.updateClient(ClientVO client) throws NotFoundException
```
- **服务内容**
    - 更新客户信息

---

- **接口名**

```java
clientUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

- **接口名**

```java
clientUIController.deleteClient(int ID) throws UndeletableException,NotFoundException
```
- **服务内容**
    - 删除客户

---

##### 5.2.2.7 importUI 模块的接口规范

### `需接口`

- **接口名**

```java
importUIController.importManagement(ImportReceiptVO importReceipt) throws InsufficientException
```
- **服务内容**
    - 创立进货单

---
- **接口名**

```java
importUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 获取满足条件的商品列表

---

- **接口名**

```java
importUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

##### 5.2.2.8 saleUI 模块的接口规范

### `需接口`

- **接口名**

```java
saleUIController.saleManagement(SaleReceiptVO saleReceipt) throws InsufficientException
```
- **服务内容**
    - 创建销售单

---


- **接口名**

```java
saleUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 获取满足条件的商品列表

---

- **接口名**

```java
saleUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

##### 5.2.2.9 importReturnUI 模块的接口规范

### `需接口`

- **接口名**

```java
importReturnUIController.importManagement(ImportReceiptVO importReceipt) throws InsufficientException
```
- **服务内容**
    - 创立进货退货单

---
- **接口名**

```java
importReturnUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 获取满足条件的商品列表

---

- **接口名**

```java
importReturnUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

##### 5.2.2.10 saleReturnUI 模块的接口规范

### `需接口`

- **接口名**

```java
saleReturnUIController.saleManagement(SaleReceiptVO saleReceipt) throws InsufficientException
```
- **服务内容**
    - 创立销售退货单

---

- **接口名**

```java
saleReturnUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 获取满足条件的商品列表

---

- **接口名**

```java
saleReturnUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

##### 5.2.2.11 accountUI 模块的接口规范

### `需接口`

- **接口名**

```java
accountUIController.addAccount(BankAccountVO account) throws DuplicateException
```
- **服务内容**
    - 增加银行账户

---
- **接口名**

```java
accountUIController.deleteAccount(int ID) throws UndeletableException,NotFoundException
```
- **服务内容**
    - 删除银行账户

---
- **接口名**

```java
accountUIController.findAccount(Map<String,String> filter)
```
- **服务内容**
    - 寻找银行账户

---

##### 5.2.2.12 collectionUI 模块的接口规范

### `需接口`

- **接口名**

```java
collectionUIController.cashManagement(CashReceiptVO cashReceipt) throws InsufficientException
```
- **服务内容**
    - 创立收款单

---


- **接口名**

```java
saleReturnUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

- **接口名**

```java
accountUIController.findAccount(Map<String,String> filter)
```
- **服务内容**
    - 寻找银行账户

---

##### 5.2.2.13 paymentUI 模块的接口规范

### `需接口`

- **接口名**

```java
paymentUIController.cashManagement(CashReceiptVO cashReceipt) throws InsufficientException
```
- **服务内容**
    - 创立付款单

---
- **接口名**

```java
paymentUIController.findClient(Map<String,String> filter)
```
- **服务内容**
    - 查找客户

---

- **接口名**

```java
accountUIController.findAccount(Map<String,String> filter)
```
- **服务内容**
    - 寻找银行账户

---

##### 5.2.2.14 reimburseUI 模块的接口规范

### `需接口`

- **接口名**

```java
reimburseUIController.cashManagement(CashReceiptVO cashReceipt) throws InsufficientException
```
- **服务内容**
    - 创立现金费用单

---

- **接口名**

```java
accountUIController.findAccount(Map<String,String> filter)
```
- **服务内容**
    - 寻找银行账户

---

##### 5.2.2.15 operationRecordUI 模块的接口规范

### `需接口`

- **接口名**

```java
operationRecordUIController.getOperationRecord(Map<String, String> filter)
```
- **服务内容**
    - 查看经营历程表

---

- **接口名**

```java
operationRecordUIController.exportOperationCondition(Map<String, String> filter)
```
- **服务内容**
    - 导出经营历程表

---

- **接口名**

```java
operationRecordUIController.redo(ReceiptVO ori, ReceiptVO update) 
```
- **服务内容**
    - 提供销售类单据、进货类单据、财务类单据、库存类单据的红冲和红冲并复制服务

---

##### 5.2.2.16 operationConditionUI 模块的接口规范

### `需接口`

- **接口名**

```java
operationConditionUIController.getOperationCondition(Map<String, String> filter)
```
- **服务内容**
    - 查看经营状况表

---

- **接口名**

```java
operationConditionUIController.exportOperationCondition(Map<String, String> filter)
```
- **服务内容**
    - 导出经营状况表

---

##### 5.2.2.17 saleDetailUI 模块的接口规范

### `需接口`

- **接口名**

```java
saleDetailUIController.getSaleDetail(Map<String, String> filter)
```
- **服务内容**
    - 获取销售明细表

---

- **接口名**

```java
saleDetailUIController.exportSaleDetail(Map<String, String> filter)
```
- **服务内容**
    - 导出符合filter条件的销售明细表为excel文件

---


##### 5.2.2.18 accountInitializationUI 模块的接口规范

### `需接口`

- **接口名**

```java
accountInitializationUIController.accountInitialization()
```
- **服务内容**
    - 进行建账操作

---

- **接口名**

```java
accountInitializationUIController.getAccountList()
```
- **服务内容**
    - 获取账目时间信息

---

- **接口名**

```java
accountInitializationUIController.getAccountDetail(AccountVO accountVO)
```
- **服务内容**
    - 获取该时间账目详细信息

---

##### 5.2.2.19 judgeReceiptUI 模块的接口规范

### `需接口`

- **接口名**

```java
judgeReceiptUIController.findReceipt(Map<String, String> filter) 
```
- **服务内容**
    - 获取待审核和审核的单据

---


```java
judgeReceiptUIController.updateReceipt(ReceiptVO receipt)
```
- **服务内容**
    - 更新单据

---


```java
judgeReceiptUIController.updateReceipt(ArrayList<ReceiptVO> receipt)
```
- **服务内容**
    - 更新多条单据

---

##### 5.2.2.20 promotionUI 模块的接口规范

### `需接口`

- **接口名**

```java
promotionUIController.addPromotion(PromotionVO promotion)
```
- **服务内容**
    - 增加销售策略

---

```java
promotionUIController.deletePromotion(int ID) throws NotFoundException, UndeletableException
```
- **服务内容**
    - 删除销售策略

---

```java
promotionUIController.updatePromotion(PromotionVO promotion) throws UndeletableException
```
- **服务内容**
    - 更新销售策略

---

```java
promotionUIController.findPromotion(Map<String, String> filter)
```
- **服务内容**
    - 删除销售策略

---

##### 5.2.2.21 authorizationUI 模块的接口规范

### `需接口`

- **接口名**

```java
authorizationUIController.login(String username,String password) throws AuthorizationException, AlreadyLoginException
```
- **服务内容**
    - 进行登录操作

---
- **接口名**

```java
authorizationUIController.getIdentityInfo(String token, String password) throws AuthorizationException
```
- **服务内容**
    - 获得身份信息

---
- **接口名**

```java
authorizationUIController.changePassword(String username, String oriPassword, String newPassword) throws AuthorizationException
```
- **服务内容**
    - 更改账户密码

---
- **接口名**

```java
authorizationUIController.updateUser(UserVO user) throws NotFoundException
```
- **服务内容**
    - 更新用户属性

---
- **接口名**

```java
authorizationUIController.addUser(UserVO user) throws DuplicateException
```
- **服务内容**
    - 增加用户账户

---

##### 5.2.2.22 presentUI 模块的接口规范

### `需接口`

- **接口名**

```java
presentUIController.present(PresentReceiptVO presentVO)
```
- **服务内容**
    - 创建赠送单

---


- **接口名**

```java
presentUIController.findCommodity(Map<String,String> filter)
```
- **服务内容**
    - 获取满足条件的商品列表

---

##### 5.2.2.23 UIutility 模块的接口规范

### `供接口`

- **接口名**
    - UIutility
- **语法**

```java 
public void init(args:String[])
```

- **前置条件**
    - 无
- **后置条件**
    - 显示界面并加载authorizationUI


---

#### 5.2.3 用户界面模块设计原理

用户界面拟用javaFX实现



---

### 5.3 业务逻辑层的分解
业务逻辑层用于向界面层提供服务，业务逻辑层的设计如下图所示：
>//TODO:insert the package diagram
`！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！`

#### 5.3.1 业务逻辑层模块的职责

| 模块                              | 职责                                                                                                                                           |
| --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| commodityUIController             | 提供商品与商品分类的增删改查界面  |
| storageBrowseUIController         | 提供根据时间查看库存的界面    |
| storageCheckUIController          | 提供库存盘点的界面  |
| storageManagementUIController     | 提供库存类单据，包括报溢单和报损单的界面     |
| messageUIController               | 提供用户相关的各项通知，包含报警单、待办事项、以及审批结果    |
| clientUIController                | 提供与客户相关的增删改查服务   |
| purchaseUIController                | 提供进货单填写与提交的界面    |
| saleUIController                  | 提供销售单单填写与提交的界面    |
| purchaseReturnUIController          | 提供进货退货单填写与提交的界面      |
| saleReturnUIController            | 提供进货退货单填写与提交的界面   |
| accountUIController               | 提供银行账户的增删查服务  |
| collectionUIController            | 提供收款单填写与提交的界面   |
| paymentUIController               | 提供付款单填写与提交的界面    |
| reimburseUIController             | 提供现金费用单填写与提交的界面   |
| operationRecordUIController       | 提供经营历程表的查看和导出服务，提供销售类单据、进货类单据、财务类单据、库存类单据的红冲和红冲并复制服务 |
| operationConditionUIController    | 提供经营状况表的查看和导出服务  |
| saleDetailUIController            | 提供销售明细表的查看和导出服务  |
| accountInitializationUIController | 提供期初建账和账目查询服务  |
| judgeReceiptUIController          | 提供单据审批服务（即查看所有单据和改变单据状态的服务）|
| promotionUIController             | 提供促销策略的增删改查服务  |
| authorizationUIController         | 提供用户的登录，增删改查服务  |
| presentUIController               | 提供赠送单的填写与提交    |
| notificationService               | 提供与用户相关的通知    |
| clientService                     | 提供与客户相关的增删改查服务  |
| commodityService                  | 提供商品分类的增删改查，商品的增删改查、进货与退货、销售与退货、赠送服务，提供库存类单据、赠送单、库存报警单、进货类单据、销售类单据的查询服务 |
| authorizationService              | 提供用户的登录，增删改查服务    |
| accountService                    | 提供银行账户的增删查服务、收款、付款、现金报销服务，提供收款单、付款单、现金费用单的查询服务   |
| operationRecordService            | 提供经营历程表的查看和导出服务，提供销售类单据、进货类单据、财务类单据、库存类单据的红冲和红冲并复制服务   |
| operationConditionService         | 提供经营状况表的查看和导出服务    |
| saleDetailService                 | 提供销售明细表的查看和导出服务     |
| accountInitialization             | 提供期初建账和账目查询服务      |
| promotionService                  | 提供促销策略的增删改查服务      |
| collectionService                 | 提供收款单的服务  |
| paymentService                    | 提供付款单的服务  |
| reimbursementService              | 提供现金费用单的服务    |
| saleService                       | 提供销售单的服务  |
| saleReturnService                 | 提供销售退货单的服务    |
| purchaseService                   | 提供进货单的服务  |
| purchaseReturnService             | 提供进货退货单的服务 |
| UnderflowService                  | 提供报损单的服务  |
| OverflowService                   | 提供报溢单的服务  |
| presentService                    | 提供赠送单的服务  |
| BLController                      | 向逻辑层提供数据服务     |
| RMIUtility                        | 提供RMI服务的工具      |


#### 5.3.2 业务逻辑模块的接口规范
<!-------------------------------->
##### 5.3.2.1 CollectionUIController 模块的接口规范

### `供接口`
- **接口名**
    - getCollectionReceipt
- **语法**

```java
public CollectionReceiptVO getCollectionReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public CollectionReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addClient
- **语法**

```java
public CollectionReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addAccountItem
- **语法**

```java
public CollectionReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeAccountItem
- **语法**

```java
public CollectionReceiptVO removeAccountItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - save
- **语法**

```java
public CollectionReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据保存到数据库中

---
- **接口名**
    - submit
- **语法**

```java
public CollectionReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据设置为提交状态并添加单据编号

---
- **接口名**
    - setComment
- **语法**

```java
public CollectionReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据的备注

---
- **接口名**
    - find
- **语法**

```java
public List<CollectionReceiptVO> find(CollectionReceiptFilter filter)
```

- **前置条件**
    - 传入的filter用来筛选收款单
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选客户

---
- **接口名**
    - findAccount
- **语法**

```java
public List<BankAccountVO> findAccount()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选银行账户

---
### `需接口`
- **接口名**

```java
CollectionService.getCollectionReceipt()
```

- **服务内容**
    - 返回单据的VO

---
- **接口名**

```java
CollectionService.clear()
```

- **服务内容**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**

```java
CollectionService.addClient(int clientID)
```

- **服务内容**
    - 为单据添加或修改客户

---
- **接口名**

```java
CollectionService.addAccountItem(AccountListItem accountListItem)
```

- **服务内容**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
CollectionService.removeAccountItem(int UIIndex)
```

- **服务内容**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
CollectionService.save()
```

- **服务内容**
    - 将单据保存到数据库中

---
- **接口名**

```java
CollectionService.submit()
```

- **服务内容**
    - 将单据设置为提交状态

---
- **接口名**

```java
CollectionService.setComment(String comment)
```

- **服务内容**
    - 设置单据的备注

---
- **接口名**

```java
CollectionService.find(CollectionReceiptFilter filter)
```

- **服务内容**
    - 返回编号对应的单据编号

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 返回符合条件的客户

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 返回符合条件的银行账户

---
<!-------------------------------->
##### 5.3.2.2 JudgeCollectionUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public CollectionReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public CollectionReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public CollectionReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addClient
- **语法**

```java
public CollectionReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addAccountItem
- **语法**

```java
public CollectionReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeAccountItem
- **语法**

```java
public CollectionReceiptVO removeAccountItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - setComment
- **语法**

```java
public CollectionReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据的备注

---
- **接口名**
    - submit
- **语法**

```java
public CollectionReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据设置为提交状态并添加单据编号

---
- **接口名**
    - find
- **语法**

```java
public List<CollectionReceiptVO> find(CollectionReceiptFilter filter)
```

- **前置条件**
    - 传入的filter用来筛选收款单
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选客户

---
- **接口名**
    - findAccount
- **语法**

```java
public List<BankAccountVO> findAccount()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选银行账户

---
### `需接口`
- **接口名**

```java
CollectionService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
CollectionService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
CollectionService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
CollectionService.addClient(int clientID)
```

- **服务内容**
    - 为单据添加或修改客户

---
- **接口名**

```java
CollectionService.addAccountItem(AccountListItem accountListItem)
```

- **服务内容**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
CollectionService.removeAccountItem(int UIIndex)
```

- **服务内容**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
CollectionService.submit()
```

- **服务内容**
    - 将单据设置为提交状态

---
- **接口名**

```java
CollectionService.setComment(String comment)
```

- **服务内容**
    - 设置单据的备注

---
- **接口名**

```java
CollectionService.find(CollectionReceiptFilter filter)
```

- **服务内容**
    - 返回编号对应的单据编号

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 返回符合条件的客户

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 返回符合条件的银行账户

---
<!-------------------------------->
##### 5.3.2.3 RedoCollectionUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public CollectionReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public CollectionReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addAccountListItem
- **语法**

```java
public CollectionReceiptVO addAccountListItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - AccountID重复时会覆盖原有的，其他情况下添加新的转账列表条目

---
- **接口名**
    - submit
- **语法**

```java
public CollectionReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
CollectionService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
CollectionService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
CollectionService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
CollectionService.addAccountListItem(AccountListItem accountListItem)
```

- **服务内容**
    - 更新转账列表，AccountID重复时会覆盖原有的，其他情况下添加新的转账列表条目

---
<!-------------------------------->
##### 5.3.2.4 PaymentUIController 模块的接口规范

### `供接口`
- **接口名**
    - getPaymentReceipt
- **语法**

```java
public PaymentReceiptVO getPaymentReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PaymentReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addClient
- **语法**

```java
public PaymentReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addAccountItem
- **语法**

```java
public PaymentReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeAccountItem
- **语法**

```java
public PaymentReceiptVO removeAccountItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - save
- **语法**

```java
public PaymentReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据保存到数据库中

---
- **接口名**
    - setComment
- **语法**

```java
public PaymentReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据的备注

---
- **接口名**
    - submit
- **语法**

```java
public PaymentReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据设置为提交状态

---
- **接口名**
    - find
- **语法**

```java
public List<PaymentReceiptVO> find(PaymentReceiptFilter filter)
```

- **前置条件**
    - 传入的filter用来筛选付款单
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选客户

---
- **接口名**
    - findAccount
- **语法**

```java
public List<BankAccountVO> findAccount()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选银行账户

---
### `需接口`
- **接口名**

```java
PaymentService.getPaymentReceipt()
```

- **服务内容**
    - 返回单据的VO

---
- **接口名**

```java
PaymentService.clear()
```

- **服务内容**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**

```java
PaymentService.addClient(int clientID)
```

- **服务内容**
    - 为单据添加或修改客户

---
- **接口名**

```java
PaymentService.addAccountItem(AccountListItem accountListItem)
```

- **服务内容**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
PaymentService.removeAccountItem(int UIIndex)
```

- **服务内容**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
PaymentService.save()
```

- **服务内容**
    - 将单据保存到数据库中

---
- **接口名**

```java
PaymentService.submit()
```

- **服务内容**
    - 将单据设置为提交状态

---
- **接口名**

```java
PaymentService.setComment(String comment)
```

- **服务内容**
    - 设置单据的备注

---
- **接口名**

```java
PaymentService.find(PaymentReceiptFilter filter)
```

- **服务内容**
    - 返回编号对应的单据编号

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 返回符合条件的客户

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 返回符合条件的银行账户

---
<!-------------------------------->
##### 5.3.2.5 JudgePaymentUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public PaymentReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PaymentReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PaymentReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addClient
- **语法**

```java
public PaymentReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addAccountItem
- **语法**

```java
public PaymentReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeAccountItem
- **语法**

```java
public PaymentReceiptVO removeAccountItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - submit
- **语法**

```java
public PaymentReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据设置为提交状态

---
- **接口名**
    - find
- **语法**

```java
public List<PaymentReceiptVO> find(PaymentReceiptFilter filter)
```

- **前置条件**
    - 传入的filter用来筛选付款单
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选客户

---
- **接口名**
    - findAccount
- **语法**

```java
public List<BankAccountVO> findAccount()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的可选银行账户

---
### `需接口`
- **接口名**

```java
PaymentService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
PaymentService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
PaymentService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
PaymentService.addClient(int clientID)
```

- **服务内容**
    - 为单据添加或修改客户

---
- **接口名**

```java
PaymentService.addAccountItem(AccountListItem accountListItem)
```

- **服务内容**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
PaymentService.removeAccountItem(int UIIndex)
```

- **服务内容**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
PaymentService.submit()
```

- **服务内容**
    - 将单据设置为提交状态

---
- **接口名**

```java
PaymentService.setComment(String comment)
```

- **服务内容**
    - 设置单据的备注

---
- **接口名**

```java
PaymentService.find(PaymentReceiptFilter filter)
```

- **服务内容**
    - 返回编号对应的单据编号

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 返回符合条件的客户

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 返回符合条件的银行账户

---
<!-------------------------------->
##### 5.3.2.6 RedoPaymentUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public PaymentReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PaymentReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addAccountItem
- **语法**

```java
public PaymentReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - AccountID重复时会覆盖原有的，其他情况下添加新的转账列表条目

---
- **接口名**
    - submit
- **语法**

```java
public PaymentReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
PaymentService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
PaymentService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
PaymentService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PaymentService.addAccountItem(AccountListItem accountListItem)
```

- **服务内容**
    - 更新转账列表，AccountID重复时会覆盖原有的，其他情况下添加新的转账列表条目

---
<!-------------------------------->
##### 5.3.2.7 ReimbursementUIController 模块的接口规范

### `供接口`
- **接口名**
    - getReimbursementReceipt
- **语法**

```java
public ReimbursementReceiptVO getReimbursementReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public ReimbursementReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addAccount
- **语法**

```java
public ReimbursementReceiptVO addAccount(String bankAccountID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改银行账户

---
- **接口名**
    - addEntryListItem
- **语法**

```java
public ReimbursementReceiptVO addEntryListItem(EntryListItem entryListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeEntryListItem
- **语法**

```java
public ReimbursementReceiptVO removeEntryListItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**
    - save
- **语法**

```java
public ReimbursementReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据保存到数据库中

---
- **接口名**
    - submit
- **语法**

```java
public ReimbursementReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据设置为提交状态

---
- **接口名**
    - find
- **语法**

```java
public List<ReimbursementReceiptVO> find(ReimbursementReceiptFilter filter)
```

- **前置条件**
    - 传入的filter用来筛选现金费用单
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - getBankAccount
- **语法**

```java
public List<BankAccountVO> getBankAccount()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有可选的银行账户

---
### `需接口`
- **接口名**

```java
ReimbursementService.getReimbursementReceipt()
```

- **服务内容**
    - 返回单据的VO

---
- **接口名**

```java
ReimbursementService.clear()
```

- **服务内容**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**

```java
ReimbursementService.addClient(int clientID)
```

- **服务内容**
    - 为单据添加或修改客户

---
- **接口名**

```java
ReimbursementService.addEntryListItem(EntryListItem entryListItem)
```

- **服务内容**
    - 为单据添加或修改条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
ReimbursementService.removeEntryListItem(int UIIndex)
```

- **服务内容**
    - 为单据删除条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
ReimbursementService.save()
```

- **服务内容**
    - 将单据保存到数据库中

---
- **接口名**

```java
ReimbursementService.submit()
```

- **服务内容**
    - 将单据设置为提交状态

---
- **接口名**

```java
ReimbursementService.find(ReimbursementReceiptFilter filter)
```

- **服务内容**
    - 返回编号对应的单据编号

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 返回符合条件的银行账户

---
<!-------------------------------->
##### 5.3.2.8 JudgeReimbursementUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public ReimbursementReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public ReimbursementReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public ReimbursementReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addClient
- **语法**

```java
public ReimbursementReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addEntryListItem
- **语法**

```java
public ReimbursementReceiptVO addEntryListItem(EntryListItem entryListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeEntryListItem
- **语法**

```java
public ReimbursementReceiptVO removeEntryListItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**
    - submit
- **语法**

```java
public ReimbursementReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据设置为提交状态

---
- **接口名**
    - find
- **语法**

```java
public List<ReimbursementReceiptVO> find(ReimbursementReceiptFilter filter)
```

- **前置条件**
    - 传入的filter用来筛选现金费用单
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - getBankAccount
- **语法**

```java
public List<BankAccountVO> getBankAccount()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有可选的银行账户

---
### `需接口`
- **接口名**

```java
ReimbursementService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
ReimbursementService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
ReimbursementService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
ReimbursementService.addClient(int clientID)
```

- **服务内容**
    - 为单据添加或修改客户

---
- **接口名**

```java
ReimbursementService.addEntryListItem(EntryListItem entryListItem)
```

- **服务内容**
    - 为单据添加或修改条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
ReimbursementService.removeEntryListItem(int UIIndex)
```

- **服务内容**
    - 为单据删除条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**

```java
ReimbursementService.submit()
```

- **服务内容**
    - 将单据设置为提交状态

---
- **接口名**

```java
ReimbursementService.find(ReimbursementReceiptFilter filter)
```

- **服务内容**
    - 返回编号对应的单据编号

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 返回符合条件的银行账户

---
<!-------------------------------->
##### 5.3.2.9 RedoReimbursementUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public ReimbursementReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public ReimbursementReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addEntryListItem
- **语法**

```java
public ReimbursementReceiptVO addEntryListItem(EntryListItem entryListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - name重复时会覆盖原有的，其他情况下添加新的条目

---
- **接口名**
    - submit
- **语法**

```java
public ReimbursementReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
ReimbursementService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
ReimbursementService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
ReimbursementService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
ReimbursementService.addEntryListItem(EntryListItem entryListItem)
```

- **服务内容**
    - 更新条目，name重复时会覆盖原有的，其他情况下添加新的条目

---
<!-------------------------------->
##### 5.3.2.10 SaleUIController 模块的接口规范

### `供接口`
- **接口名**
    - getSaleReceipt
- **语法**

```java
public SaleReceiptVO getSaleReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public SaleReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理当前单据，新建一个VO，如果是草稿，则从数据库删除之前的VO

---
- **接口名**
    - setClient
- **语法**

```java
public SaleReceiptVO setClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - setSalesman
- **语法**

```java
public SaleReceiptVO setSalesman(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加业务员

---
- **接口名**
    - setWarehouse
- **语法**

```java
public SaleReceiptVO setWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public SaleReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public SaleReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public SaleReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setVoucher
- **语法**

```java
public SaleReceiptVO setVoucher(BigDecimal voucher)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据代金券

---
- **接口名**
    - setDiscount
- **语法**

```java
public SaleReceiptVO setDiscount(BigDecimal discount)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据折让

---
- **接口名**
    - setComment
- **语法**

```java
public SaleReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
- **接口名**
    - findSalesman
- **语法**

```java
public List<UserVO> findSalesman()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回所有可选业务员

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
SaleService.getSaleReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
SaleService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
SaleService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
SaleService.addSalesman(int userID)
```

- **服务内容**
    - 添加操作员

---
- **接口名**

```java
SaleService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
SaleService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
SaleService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
SaleService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
SaleService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
SaleService.setVoucher(BigDecimal voucher)
```

- **服务内容**
    - 设置单据代金券

---
- **接口名**

```java
SaleService.setDiscount(BigDecimal discount)
```

- **服务内容**
    - 设置单据折让

---
- **接口名**

```java
SaleService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
UserService.getUser(UserFilter filter)
```

- **服务内容**
    - 系统返回可选的业务员

---
<!-------------------------------->
##### 5.3.2.11 JudgeSaleUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public SaleReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public SaleReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public SaleReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - setClient
- **语法**

```java
public SaleReceiptVO setClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - setSalesman
- **语法**

```java
public SaleReceiptVO setSalesman(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加业务员

---
- **接口名**
    - setWarehouse
- **语法**

```java
public SaleReceiptVO setWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public SaleReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public SaleReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setVoucher
- **语法**

```java
public SaleReceiptVO setVoucher(BigDecimal voucher)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据代金券

---
- **接口名**
    - setDiscount
- **语法**

```java
public SaleReceiptVO setDiscount(BigDecimal discount)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据折让

---
- **接口名**
    - setComment
- **语法**

```java
public SaleReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
- **接口名**
    - findSalesman
- **语法**

```java
public List<UserVO> findSalesman()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回所有可选业务员

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
SaleService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
SaleService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
SaleService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
SaleService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
SaleService.addSalesman(int userID)
```

- **服务内容**
    - 添加业务员

---
- **接口名**

```java
SaleService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
SaleService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
SaleService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
SaleService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
SaleService.setVoucher(BigDecimal voucher)
```

- **服务内容**
    - 设置单据代金券

---
- **接口名**

```java
SaleService.setDiscount(BigDecimal discount)
```

- **服务内容**
    - 设置单据折让

---
- **接口名**

```java
SaleService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
UserService.getUser(UserFilter filter)
```

- **服务内容**
    - 系统返回可选的业务员

---
<!-------------------------------->
##### 5.3.2.12 RedoSaleUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public SaleReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public SaleReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - submit
- **语法**

```java
public SaleReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
SaleService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
SaleService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
SaleService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
SaleService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
<!-------------------------------->
##### 5.3.2.13 SaleReturnUIController 模块的接口规范

### `供接口`
- **接口名**
    - getSaleReturnReceipt
- **语法**

```java
public SaleReturnReceiptVO getSaleReturnReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public SaleReturnReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理当前单据，新建一个VO，如果是草稿，则从数据库删除之前的VO

---
- **接口名**
    - setClient
- **语法**

```java
public SaleReturnReceiptVO setClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - setSalesman
- **语法**

```java
public SaleReturnReceiptVO setSalesman(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加业务员

---
- **接口名**
    - setWarehouse
- **语法**

```java
public SaleReturnReceiptVO setWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public SaleReturnReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public SaleReturnReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setComment
- **语法**

```java
public SaleReturnReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
- **接口名**
    - findSalesman
- **语法**

```java
public List<UserVO> findSalesman()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回所有可选业务员

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
SaleReturnService.getSaleReturnReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
SaleReturnService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
SaleReturnService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
SaleReturnService.addSalesman(int userID)
```

- **服务内容**
    - 添加业务员

---
- **接口名**

```java
SaleReturnService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
SaleReturnService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
SaleReturnService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
SaleReturnService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
SaleReturnService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
SaleReturnService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
UserService.getUser(UserFilter filter)
```

- **服务内容**
    - 系统返回可选的业务员

---
<!-------------------------------->
##### 5.3.2.14 JudgeSaleReturnUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public SaleReturnReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public SaleReturnReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public SaleReturnReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - setClient
- **语法**

```java
public SaleReturnReceiptVO setClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - setSalesman
- **语法**

```java
public SaleReturnReceiptVO setSalesman(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加业务员

---
- **接口名**
    - setWarehouse
- **语法**

```java
public SaleReturnReceiptVO setWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public SaleReturnReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setComment
- **语法**

```java
public SaleReturnReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient()
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
- **接口名**
    - findSalesman
- **语法**

```java
public List<UserVO> findSalesman()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回所有可选业务员

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
SaleReturnService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
SaleReturnService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
SaleReturnService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
SaleReturnService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
SaleReturnService.addSalesman(int userID)
```

- **服务内容**
    - 添加业务员

---
- **接口名**

```java
SaleReturnService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
SaleReturnService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
SaleReturnService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
SaleReturnService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
SaleReturnService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
UserService.getUser(UserFilter filter)
```

- **服务内容**
    - 系统返回可选的业务员

---
<!-------------------------------->
##### 5.3.2.15 RedoSaleReturnUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public SaleReturnReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public SaleReturnReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - submit
- **语法**

```java
public SaleReturnReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
SaleReturnService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
SaleReturnService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
SaleReturnService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
SaleReturnService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
<!-------------------------------->
##### 5.3.2.16 PurchaseUIController 模块的接口规范

### `供接口`
- **接口名**
    - getPurchaseReceipt
- **语法**

```java
public PurchaseReceiptVO getPurchaseReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PurchaseReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addClient
- **语法**

```java
public PurchaseReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addWarehouse
- **语法**

```java
public PurchaseReceiptVO addWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public PurchaseReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public PurchaseReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setComment
- **语法**

```java
public PurchaseReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
### `需接口`
- **接口名**

```java
PurchaseService.getPurchaseReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
PurchaseService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
PurchaseService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
PurchaseService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
PurchaseService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
PurchaseService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
PurchaseService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
PurchaseService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PurchaseService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
<!-------------------------------->
##### 5.3.2.17 JudgePurchaseUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public PurchaseReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PurchaseReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PurchaseReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addClient
- **语法**

```java
public PurchaseReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addWarehouse
- **语法**

```java
public PurchaseReceiptVO addWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public PurchaseReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setComment
- **语法**

```java
public PurchaseReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
### `需接口`
- **接口名**

```java
PurchaseService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
PurchaseService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
PurchaseService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
PurchaseService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
PurchaseService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
PurchaseService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
PurchaseService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
PurchaseService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PurchaseService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
<!-------------------------------->
##### 5.3.2.18 RedoPurchaseUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public PurchaseReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PurchaseReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
PurchaseService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
PurchaseService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
PurchaseService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PurchaseService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
<!-------------------------------->
##### 5.3.2.19 PurchaseReturnUIController 模块的接口规范

### `供接口`
- **接口名**
    - getPurchaseReturnReceipt
- **语法**

```java
public PurchaseReturnReceiptVO getPurchaseReturnReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PurchaseReturnReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addClient
- **语法**

```java
public PurchaseReturnReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addWarehouse
- **语法**

```java
public PurchaseReturnReceiptVO addWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public PurchaseReturnReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReturnReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setComment
- **语法**

```java
public PurchaseReturnReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
### `需接口`
- **接口名**

```java
PurchaseReturnService.getPurchaseReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
PurchaseReturnService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
PurchaseReturnService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
PurchaseReturnService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
PurchaseReturnService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
PurchaseReturnService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
PurchaseReturnService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
PurchaseReturnService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PurchaseReturnService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
<!-------------------------------->
##### 5.3.2.20 JudgePurchaseReturnUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public PurchaseReturnReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PurchaseReturnReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PurchaseReturnReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addClient
- **语法**

```java
public PurchaseReturnReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addWarehouse
- **语法**

```java
public PurchaseReturnReceiptVO addWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReturnReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setComment
- **语法**

```java
public PurchaseReturnReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
### `需接口`
- **接口名**

```java
PurchaseReturnService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
PurchaseReturnService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
PurchaseReturnService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
PurchaseReturnService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
PurchaseReturnService.addWarehouse(String warehouse)
```

- **服务内容**
    - 添加仓库属性

---
- **接口名**

```java
PurchaseReturnService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
PurchaseReturnService.removeCommodityListItem(int index)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
PurchaseReturnService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PurchaseReturnService.setComment(String comment)
```

- **服务内容**
    - 设置单据备注

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
<!-------------------------------->
##### 5.3.2.21 RedoPurchaseReturnUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public PurchaseReturnReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PurchaseReturnReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的转账列表条目

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReturnReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
PurchaseReturnService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
PurchaseReturnService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
PurchaseReturnService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PurchaseReturnService.addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **服务内容**
    - 更新商品，CommodityID重复时会覆盖原有的，其他情况下添加新的转账列表条目

---
<!-------------------------------->
##### 5.3.2.22 UnderflowUIController 模块的接口规范

### `供接口`
- **接口名**
    - getUnderflowReceipt
- **语法**

```java
public UnderflowReceiptVO getUnderflowReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public UnderflowReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addCommodity
- **语法**

```java
public UnderflowReceiptVO addCommodity(int commodityID, int number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodity
- **语法**

```java
public UnderflowReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public UnderflowReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public UnderflowReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
UnderflowService.getUnderflowReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
UnderflowService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
UnderflowService.addCommodity(int commodityID, int number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
UnderflowService.removeCommodity(int commodityID)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
UnderflowService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
UnderflowService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
<!-------------------------------->
##### 5.3.2.23 JudgeUndeflowUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public UnderflowReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public UnderflowReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public UnderflowReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addCommodity
- **语法**

```java
public UnderflowReceiptVO addCommodity(int commodityID, int number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodity
- **语法**

```java
public UnderflowReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public UnderflowReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
UnderflowService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
UnderflowService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
UnderflowService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
UnderflowService.addCommodity(int commodityID, int number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
UnderflowService.removeCommodity(int commodityID)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
UnderflowService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
<!-------------------------------->
##### 5.3.2.24 RedoUnderflowUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public UnderflowReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public UnderflowReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodity
- **语法**

```java
public UnderflowReceiptVO addCommodity(int commodityID, int number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - submit
- **语法**

```java
public UnderflowReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
UnderflowService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
UnderflowService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
UnderflowService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
UnderflowService.addCommodity(int commodityID, int number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
<!-------------------------------->
##### 5.3.2.25 OverflowUIController 模块的接口规范

### `供接口`
- **接口名**
    - getOverflowReceipt
- **语法**

```java
public OverflowReceiptVO getOverflowReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public OverflowReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addCommodity
- **语法**

```java
public OverflowReceiptVO addCommodity(int commodityID, BigDecimal number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodity
- **语法**

```java
public OverflowReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public OverflowReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public OverflowReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
OverflowService.getOverflowReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
OverflowService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
OverflowService.addCommodity(int commodityID, BigDecimal number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
OverflowService.removeCommodity(int commodityID)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
OverflowService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
OverflowService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
<!-------------------------------->
##### 5.3.2.26 JudgeOverflowUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public OverflowReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public OverflowReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public OverflowReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addCommodity
- **语法**

```java
public OverflowReceiptVO addCommodity(int commodityID, BigDecimal number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodity
- **语法**

```java
public OverflowReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public OverflowReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
### `需接口`
- **接口名**

```java
OverflowService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
OverflowService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
OverflowService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
OverflowService.addCommodity(int commodityID, BigDecimal number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
OverflowService.removeCommodity(int commodityID)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
OverflowService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
<!-------------------------------->
##### 5.3.2.27 RedoOverflowUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public OverflowReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public OverflowReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodity
- **语法**

```java
public OverflowReceiptVO addCommodity(int commodityID, BigDecimal number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - submit
- **语法**

```java
public OverflowReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
OverflowService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
OverflowService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
OverflowService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
OverflowService.addCommodity(int commodityID, BigDecimal number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
<!-------------------------------->
##### 5.3.2.28 PresentUIController 模块的接口规范

### `供接口`
- **接口名**
    - getPresentReceipt
- **语法**

```java
public PresentReceiptVO getPresentReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PresentReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addCommodity
- **语法**

```java
public PresentReceiptVO addCommodity(int commodityID, BigDecimal number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodity
- **语法**

```java
public PresentReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - save
- **语法**

```java
public PresentReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public PresentReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setClient
- **语法**

```java
public PresentReceiptVO setClient(ClientVO clientVO)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加客户

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
### `需接口`
- **接口名**

```java
PresentService.getPresentReceipt()
```

- **服务内容**
    - 获得这张单据的VO

---
- **接口名**

```java
PresentService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
PresentService.addCommodity(int commodityID, BigDecimal number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
PresentService.removeCommodity(int commodityID)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
PresentService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
PresentService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PresentService.setClient(ClientVO clientVO)
```

- **服务内容**
    - 为单据添加客户

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
<!-------------------------------->
##### 5.3.2.29 JudgePresentUIController 模块的接口规范

### `供接口`
- **接口名**
    - pass
- **语法**

```java
public PresentReceiptVO pass(String receiptID) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PresentReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PresentReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
- **接口名**
    - addCommodity
- **语法**

```java
public PresentReceiptVO addCommodity(int commodityID, BigDecimal number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodity
- **语法**

```java
public PresentReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - submit
- **语法**

```java
public PresentReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - setClient
- **语法**

```java
public PresentReceiptVO setClient(ClientVO clientVO)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加客户

---
- **接口名**
    - findCommodity
- **语法**

```java
public CommodityCategoryVO findCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回商品列表

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
### `需接口`
- **接口名**

```java
PresentService.pass(String receiptID)
```

- **服务内容**
    - 将单据状态标为通过

---
- **接口名**

```java
PresentService.fail(String receiptID)
```

- **服务内容**
    - 将单据状态标为不通过

---
- **接口名**

```java
PresentService.edit(String receiptID)
```

- **服务内容**
    - 审批时开始修改单据内容

---
- **接口名**

```java
PresentService.addCommodity(int commodityID, BigDecimal number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**

```java
PresentService.removeCommodity(int commodityID)
```

- **服务内容**
    - 在商品列表里面删除这条账目

---
- **接口名**

```java
PresentService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PresentService.setClient(ClientVO clientVO)
```

- **服务内容**
    - 为单据添加客户

---
- **接口名**

```java
CommodityService.getCommodityCategory()
```

- **服务内容**
    - 系统返回商品列表

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
<!-------------------------------->
##### 5.3.2.30 RedoPresentUIController 模块的接口规范

### `供接口`
- **接口名**
    - redo
- **语法**

```java
public PresentReceiptVO redo(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PresentReceiptVO redoAndDuplicate(String receiptID) throws InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - addCommodity
- **语法**

```java
public PresentReceiptVO addCommodity(int commodityID, BigDecimal number)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - submit
- **语法**

```java
public PresentReceiptVO submit() throws InsufficientException
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
### `需接口`
- **接口名**

```java
PresentService.redo(String receiptID)
```

- **服务内容**
    - 红冲的单据VO（已经取反）

---
- **接口名**

```java
PresentService.redoAndDuplicate(String receiptID)
```

- **服务内容**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**

```java
PresentService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PresentService.addCommodity(int commodityID, BigDecimal number)
```

- **服务内容**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
<!-------------------------------->
##### 5.3.2.31 CommodityUIController 模块的接口规范

### `供接口`
- **接口名**
    - addCommodity
- **语法**

```java
public CommodityVO addCommodity(CommodityVO commodityVO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 添加商品信息并存入数据库

---
- **接口名**
    - updateCommodity
- **语法**

```java
public CommodityVO updateCommodity(CommodityVO commodityVO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新商品信息

---
- **接口名**
    - findCommodity
- **语法**

```java
public List<CommodityVO> findCommodity(CommodityFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合条件的商品

---
- **接口名**
    - deleteCommodity
- **语法**

```java
public boolean deleteCommodity(int commodityID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除未产生交互的商品

---
### `需接口`
- **接口名**

```java
CommodityService.addCommodity(CommodityVO commodityVO)
```

- **服务内容**
    - 添加商品信息并存入数据库

---
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodityVO)
```

- **服务内容**
    - 更新商品信息

---
- **接口名**

```java
CommodityService.findCommodity(CommodityFilter filter)
```

- **服务内容**
    - 系统返回找到的符合条件的商品

---
- **接口名**

```java
CommodityService.deleteCommodity(int commodityID)
```

- **服务内容**
    - 删除未产生交互的商品

---
<!-------------------------------->
##### 5.3.2.32 CommodityCategoryUIController 模块的接口规范

### `供接口`
- **接口名**
    - addCategory
- **语法**

```java
public CommodityCategoryVO addCategory(CommodityCategoryVO commodityCategoryVO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 向数据库添加商品分类

---
- **接口名**
    - search
- **语法**

```java
public CommodityCategoryVO search(int categoryID)
```

- **前置条件**
    - 无
- **后置条件**
    - 系统递归查找所有该商品分类的子分类／商品并返回

---
- **接口名**
    - search
- **语法**

```java
public CommodityCategoryVO search()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回所有商品分类和商品

---
- **接口名**
    - updateCategory
- **语法**

```java
public CommodityCategoryVO updateCategory(CommodityCategoryVO commodityCategoryVO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新商品分类的信息

---
- **接口名**
    - deleteCategory
- **语法**

```java
public boolean deleteCategory(int categoryID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除无所属商品的商品分类

---
### `需接口`
- **接口名**

```java
CommodityCategoryService.addCommodityCategory(CommodityCategoryVO category)
```

- **服务内容**
    - 向数据库添加商品分类

---
- **接口名**

```java
CommodityCategoryService.getCommodityCategory(CommodityCategoryVO parent)
```

- **服务内容**
    - 系统递归查找所有该商品分类的子分类／商品并返回

---
- **接口名**

```java
CommodityCategoryService.getCommodityCategory()
```

- **服务内容**
    - 系统返回所有商品分类和商品

---
- **接口名**

```java
CommodityCategoryService.updateCommodityCategory(CommodityCategoryVO category)
```

- **服务内容**
    - 更新商品分类的信息

---
- **接口名**

```java
CommodityCategoryService.deleteCommodityCategory(int category)
```

- **服务内容**
    - 删除无所属商品的商品分类

---
<!-------------------------------->
##### 5.3.2.33 BankAccountUIController 模块的接口规范

### `供接口`
- **接口名**
    - addAccount
- **语法**

```java
public BankAccountVO addAccount(BankAccountVO account) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 添加银行账户信息并存入数据库

---
- **接口名**
    - updateAccount
- **语法**

```java
public BankAccountVO updateAccount(BankAccountVO account) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新银行账户信息

---
- **接口名**
    - findAccount
- **语法**

```java
public List<BankAccountVO> findAccount(BankAccountFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合条件的银行账户

---
- **接口名**
    - deleteAccount
- **语法**

```java
public boolean deleteAccount(String ID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除未产生交互的银行账户

---
### `需接口`
- **接口名**

```java
BankAccountService.addAccount(BankAccountVO account)
```

- **服务内容**
    - 添加银行账户信息并存入数据库

---
- **接口名**

```java
BankAccountService.updateAccount(BankAccountVO account)
```

- **服务内容**
    - 更新银行账户信息

---
- **接口名**

```java
BankAccountService.findAccount(BankAccountFilter filter)
```

- **服务内容**
    - 系统返回找到的符合条件的银行账户

---
- **接口名**

```java
BankAccountService.deleteAccount(String accountID)
```

- **服务内容**
    - 删除未产生交互的银行账户

---
<!-------------------------------->
##### 5.3.2.34 ClientUIController 模块的接口规范

### `供接口`
- **接口名**
    - addClient
- **语法**

```java
public ClientVO addClient(ClientVO client) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 添加客户信息并存入数据库

---
- **接口名**
    - updateClient
- **语法**

```java
public ClientVO updateClient(ClientVO client) throws NotFoundException, InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新客户信息

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合条件的客户

---
- **接口名**
    - deleteClient
- **语法**

```java
public boolean deleteClient(int ID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除未产生交互的客户

---
- **接口名**
    - getUsers
- **语法**

```java
public List<UserVO> getUsers()
```

- **前置条件**
    - 无
- **后置条件**
    - 获得所有客户

---
### `需接口`
- **接口名**

```java
ClientService.addClient(ClientVO client)
```

- **服务内容**
    - 添加客户信息并存入数据库

---
- **接口名**

```java
ClientService.updateClient(ClientVO client)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
ClientService.findClient(ClientFilter filter)
```

- **服务内容**
    - 系统返回找到的符合条件的客户

---
- **接口名**

```java
ClientService.deleteClient(int ID)
```

- **服务内容**
    - 删除未产生交互的客户

---
- **接口名**

```java
UserService.getUsers()
```

- **服务内容**
    - 获得所有客户

---
<!-------------------------------->
##### 5.3.2.35 AuthorizationUIController 模块的接口规范

### `供接口`
- **接口名**
    - login
- **语法**

```java
public String login(int userID, String password) throws AuthorizationException
```

- **前置条件**
    - 无
- **后置条件**
    - 返回此用户的身份

---
- **接口名**
    - getIdentityInfo
- **语法**

```java
public UserVO getIdentityInfo(int userID) throws AuthorizationException
```

- **前置条件**
    - 无
- **后置条件**
    - 返回用户的身份与权限

---
- **接口名**
    - isValid
- **语法**

```java
public boolean isValid(int userID, String token) throws AuthorizationException
```

- **前置条件**
    - 无
- **后置条件**
    - 对比客户端和服务器token来确定user登陆是否有效

---
- **接口名**
    - changePassword
- **语法**

```java
public boolean changePassword(int userID, String oriPassword, String newPassword)
```

- **前置条件**
    - 无
- **后置条件**
    - 修改用户的密码

---
- **接口名**
    - updateUser
- **语法**

```java
public UserVO updateUser(UserVO user) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新用户的信息

---
- **接口名**
    - addUser
- **语法**

```java
public UserVO addUser(UserVO user) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 添加新用户信息

---
- **接口名**
    - getUsers
- **语法**

```java
public List<UserVO> getUsers()
```

- **前置条件**
    - 
- **后置条件**
    - 返回所有用户

---
### `需接口`
- **接口名**

```java
UserService.login(int userID, String password)
```

- **服务内容**
    - 返回此用户的身份

---
- **接口名**

```java
UserService.getIdentityInfo(int userID)
```

- **服务内容**
    - 返回用户的身份与权限

---
- **接口名**

```java
UserService.isValid(int userID, String token)
```

- **服务内容**
    - 对比客户端和服务器token来确定user登陆是否有效

---
- **接口名**

```java
UserService.changePassword(int userID, String oriPassword, String newPassword)
```

- **服务内容**
    - 修改用户的密码

---
- **接口名**

```java
UserService.updateUser(UserVO user)
```

- **服务内容**
    - 更新用户的信息

---
- **接口名**

```java
UserService.addUser(UserVO user)
```

- **服务内容**
    - 添加新用户信息

---
- **接口名**

```java
UserService.getUser(UserFilter filter)
```

- **服务内容**
    - 返回所有用户

---
<!-------------------------------->
##### 5.3.2.36 PromotionUIController 模块的接口规范

### `供接口`
- **接口名**
    - getCommodity
- **语法**

```java
public CommodityCategoryVO getCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的商品

---
- **接口名**
    - addPromotion
- **语法**

```java
public CommodityPromotionVO addPromotion(CommodityPromotionVO promotion)
```

- **前置条件**
    - 无
- **后置条件**
    - 新增一种商品组合优惠

---
- **接口名**
    - addPromotion
- **语法**

```java
public TotalPromotionVO addPromotion(TotalPromotionVO promotion)
```

- **前置条件**
    - 无
- **后置条件**
    - 新增一种总额优惠

---
- **接口名**
    - addPromotion
- **语法**

```java
public VIPPromotionVO addPromotion(VIPPromotionVO promotion)
```

- **前置条件**
    - 无
- **后置条件**
    - 新增一种VIP优惠

---
- **接口名**
    - updatePromotion
- **语法**

```java
public CommodityPromotionVO updatePromotion(CommodityPromotionVO promotion) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新一种未生效的商品组合优惠

---
- **接口名**
    - updatePromotion
- **语法**

```java
public TotalPromotionVO updatePromotion(TotalPromotionVO promotion) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新一种未生效的总额优惠

---
- **接口名**
    - updatePromotion
- **语法**

```java
public VIPPromotionVO updatePromotion(VIPPromotionVO promotion) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新一种未生效的VIP优惠

---
- **接口名**
    - deletePromotion
- **语法**

```java
public boolean deletePromotion(String promotionID) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除一种未生效的促销策略

---
- **接口名**
    - findCommodityPromotion
- **语法**

```java
public List<CommodityPromotionVO> findCommodityPromotion()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有商品组合优惠

---
- **接口名**
    - findTotalPromotion
- **语法**

```java
public List<TotalPromotionVO> findTotalPromotion()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有总额优惠

---
- **接口名**
    - findVIPPromotion
- **语法**

```java
public List<VIPPromotionVO> findVIPPromotion()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有VIP优惠

---
### `需接口`
- **接口名**

```java
CommodityCategoryService.getCommodityCategory()
```

- **服务内容**
    - 返回所有的商品

---
- **接口名**

```java
PromotionService.addPromotion(CommodityPromotionVO promotion)
```

- **服务内容**
    - 新增一种商品组合优惠

---
- **接口名**

```java
PromotionService.addPromotion(TotalPromotionVO promotion)
```

- **服务内容**
    - 新增一种总额优惠

---
- **接口名**

```java
PromotionService.addPromotion(VIPPromotionVO promotion)
```

- **服务内容**
    - 新增一种VIP优惠

---
- **接口名**

```java
PromotionService.updatePromotion(CommodityPromotionVO promotion)
```

- **服务内容**
    - 更新一种未生效的商品组合优惠

---
- **接口名**

```java
PromotionService.updatePromotion(TotalPromotionVO promotion)
```

- **服务内容**
    - 更新一种未生效的总额优惠

---
- **接口名**

```java
PromotionService.updatePromotion(VIPPromotionVO promotion)
```

- **服务内容**
    - 更新一种未生效的VIP优惠

---
- **接口名**

```java
PromotionService.deletePromotion(String promotionID)
```

- **服务内容**
    - 删除一种未生效的促销策略

---
- **接口名**

```java
PromotionService.findCommodityPromotion()
```

- **服务内容**
    - 返回所有商品组合优惠

---
- **接口名**

```java
PromotionService.findTotalPromotion()
```

- **服务内容**
    - 返回所有总额优惠

---
- **接口名**

```java
PromotionService.findVIPPromotion()
```

- **服务内容**
    - 返回所有VIP优惠

---
<!-------------------------------->
##### 5.3.2.37 OperationConditionUIController 模块的接口规范

### `供接口`
- **接口名**
    - getOperationCondition
- **语法**

```java
public OperationConditionVO getOperationCondition(TimeFilter filter)
```

- **前置条件**
    - 传入时间筛选经营情况
- **后置条件**
    - 返回传入时间的经营情况表

---
### `需接口`
- **接口名**

```java
OperationConditionService.getOperationCondition(TimeFilter filter)
```

- **服务内容**
    - 返回传入时间的经营情况表

---

<!-------------------------------->
##### 5.X.X.X CollectionService 模块的接口规范

### `供接口`
- **接口名**
    - getCollectionReceipt
- **语法**

```java
public CollectionReceiptVO getCollectionReceipt()
```

- **前置条件**
    - service正确初始化，持有上次保存的单据草稿或全新单据
- **后置条件**
    - 返回单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public CollectionReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addClient
- **语法**

```java
public CollectionReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addAccountItem
- **语法**

```java
public CollectionReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeAccountItem
- **语法**

```java
public CollectionReceiptVO removeAccountItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - save
- **语法**

```java
public CollectionReceiptVO save()
```

- **前置条件**
    - 单据所有字段都符合要求（要求参见需求规格说明文档）
- **后置条件**
    - 将单据保存到数据库中

---
- **接口名**
    - setComment
- **语法**

```java
public CollectionReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据的备注

---
- **接口名**
    - submit
- **语法**

```java
public CollectionReceiptVO submit()
```

- **前置条件**
    - 单据所有字段都符合要求（要求参见需求规格说明文档）
- **后置条件**
    - 将单据设置为提交状态并添加单据编号

---
- **接口名**
    - findByID
- **语法**

```java
public CollectionReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - find
- **语法**

```java
public List<CollectionReceiptVO> find(CollectionReceiptFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - trig
- **语法**

```java
public CollectionReceiptVO trig(CollectionReceiptVO collectionReceipt) throws InsufficientException
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - update
- **语法**

```java
public CollectionReceiptVO update(CollectionReceiptVO collectionReceipt)
```

- **前置条件**
    - 无
- **后置条件**
    - 更新单据

---
- **接口名**
    - write
- **语法**

```java
public CollectionReceiptVO write(CollectionReceiptVO collectionReceipt)
```

- **前置条件**
    - 向数据层发送一个CollectionReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public CollectionReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public CollectionReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public CollectionReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public CollectionReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public CollectionReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
BankAccountService.updateAccount(BankAccountVO account)
```

- **服务内容**
    - 更新银行账户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
CollectionController.add(CollectionReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
CollectionController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
CollectionController.update(CollectionReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
CollectionController.find(CollectionReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
CollectionController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X PaymentService 模块的接口规范

### `供接口`
- **接口名**
    - getCollectionReceipt
- **语法**

```java
public PaymentReceiptVO getCollectionReceipt()
```

- **前置条件**
    - service正确初始化，持有上次保存的单据草稿或全新单据
- **后置条件**
    - 返回单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PaymentReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addClient
- **语法**

```java
public PaymentReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改客户

---
- **接口名**
    - addAccountItem
- **语法**

```java
public PaymentReceiptVO addAccountItem(AccountListItem accountListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeAccountItem
- **语法**

```java
public PaymentReceiptVO removeAccountItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除转账列表,并为单据自动计算并添加总额汇总

---
- **接口名**
    - save
- **语法**

```java
public PaymentReceiptVO save()
```

- **前置条件**
    - 单据所有字段都符合要求（要求参见需求规格说明文档）
- **后置条件**
    - 将单据保存到数据库中

---
- **接口名**
    - setComment
- **语法**

```java
public PaymentReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据的备注

---
- **接口名**
    - submit
- **语法**

```java
public PaymentReceiptVO submit()
```

- **前置条件**
    - 单据所有字段都符合要求（要求参见需求规格说明文档）
- **后置条件**
    - 将单据设置为提交状态并添加单据编号

---
- **接口名**
    - find
- **语法**

```java
public List<PaymentReceiptVO> find(PaymentReceiptFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回编号对应的单据编号

---
- **接口名**
    - findByID
- **语法**

```java
public PaymentReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - trig
- **语法**

```java
public PaymentReceiptVO trig(PaymentReceiptVO paymentReceipt) throws InsufficientException
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - update
- **语法**

```java
public PaymentReceiptVO update(PaymentReceiptVO paymentReceipt)
```

- **前置条件**
    - 无
- **后置条件**
    - 更新单据

---
- **接口名**
    - write
- **语法**

```java
public PaymentReceiptVO write(PaymentReceiptVO paymentReceipt)
```

- **前置条件**
    - 向数据层发送一个PaymentReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public PaymentReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PaymentReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public PaymentReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PaymentReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PaymentReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
BankAccountService.updateAccount(BankAccountVO account)
```

- **服务内容**
    - 更新银行账户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
PaymentController.add(PaymentReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
PaymentController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
PaymentController.update(PaymentReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
PaymentController.find(PaymentReceiptPOFilter receiptPOFilter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
PaymentController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X ReimbursementService 模块的接口规范

### `供接口`
- **接口名**
    - getReimbursement
- **语法**

```java
public ReimbursementReceiptVO getReimbursement()
```

- **前置条件**
    - service正确初始化，持有上次保存的单据草稿或全新单据
- **后置条件**
    - 返回单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public ReimbursementReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 将Service持有的VO改变为传入的VO，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addAccount
- **语法**

```java
public ReimbursementReceiptVO addAccount(int id)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改银行账户

---
- **接口名**
    - addEntryListItem
- **语法**

```java
public ReimbursementReceiptVO addEntryListItem(EntryListItem entryListItem)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据添加或修改条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**
    - removeEntryListItem
- **语法**

```java
public ReimbursementReceiptVO removeEntryListItem(int UIIndex)
```

- **前置条件**
    - 无
- **后置条件**
    - 为单据删除条目清单,并为单据自动计算并添加总额汇总

---
- **接口名**
    - save
- **语法**

```java
public ReimbursementReceiptVO save()
```

- **前置条件**
    - 单据所有字段都符合要求（要求参见需求规格说明文档）
- **后置条件**
    - 将单据保存到数据库中

---
- **接口名**
    - submit
- **语法**

```java
public ReimbursementReceiptVO submit()
```

- **前置条件**
    - 单据所有字段都符合要求（要求参见需求规格说明文档）
- **后置条件**
    - 将单据设置为提交状态并添加单据编号

---
- **接口名**
    - find
- **语法**

```java
public List<ReimbursementReceiptVO> find(ReimbursementReceiptFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回编号对应的单据

---
- **接口名**
    - findByID
- **语法**

```java
public ReimbursementReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - trig
- **语法**

```java
public ReimbursementReceiptVO trig(ReimbursementReceiptVO reimbursement) throws InsufficientException
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - update
- **语法**

```java
public ReimbursementReceiptVO update(ReimbursementReceiptVO reimbursement)
```

- **前置条件**
    - 无
- **后置条件**
    - 更新单据

---
- **接口名**
    - write
- **语法**

```java
public ReimbursementReceiptVO write(ReimbursementReceiptVO reimbursement)
```

- **前置条件**
    - 向数据层发送一个ReimbursementReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public ReimbursementReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public ReimbursementReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public ReimbursementReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public ReimbursementReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public ReimbursementReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
BankAccountService.updateAccount(BankAccountVO account)
```

- **服务内容**
    - 更新银行账户

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
RemibursementController.add(RemibursementReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
RemibursementController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
RemibursementController.update(RemibursementReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
RemibursementController.find(RemibursementReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
ReimbursementController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X SaleService 模块的接口规范

### `供接口`
- **接口名**
    - getSaleReceipt
- **语法**

```java
public SaleReceiptVO getSaleReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public SaleReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addClient
- **语法**

```java
public SaleReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addSalesman
- **语法**

```java
public SaleReceiptVO addSalesman(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加业务员

---
- **接口名**
    - addWarehouse
- **语法**

```java
public SaleReceiptVO addWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public SaleReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - setVoucher
- **语法**

```java
public SaleReceiptVO setVoucher(BigDecimal voucher)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据代金券

---
- **接口名**
    - setDiscount
- **语法**

```java
public SaleReceiptVO setDiscount(BigDecimal discount)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据折让

---
- **接口名**
    - setComment
- **语法**

```java
public SaleReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - save
- **语法**

```java
public SaleReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public SaleReceiptVO submit()
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - find
- **语法**

```java
public List<SaleReceiptVO> find(SaleReceiptFilter filter)
```

- **前置条件**
    - 传入一个筛选条件
- **后置条件**
    - 返回所有满足条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public SaleReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - trig
- **语法**

```java
public SaleReceiptVO trig(SaleReceiptVO saleReceipt) throws InsufficientException
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public SaleReceiptVO write(SaleReceiptVO saleReceipt)
```

- **前置条件**
    - 向数据层发送一个SaleReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public SaleReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public SaleReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public SaleReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public SaleReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public SaleReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
ClientService.findClientByID(int ID)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
PromotionService.calPromotion(SaleReceiptVO saleReceiptVO)
```

- **服务内容**
    - 计算优惠

---
- **接口名**

```java
SaleController.add(SaleReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
SaleController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
SaleController.update(SaleReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
SaleController.find(SaleReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
SaleController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
- **接口名**

```java
PresentService.getPresentReceipt()
```

- **服务内容**
    - 返回赠送单的VO

---
- **接口名**

```java
PresentService.clear()
```

- **服务内容**
    - 清理草稿单，新建一个VO

---
- **接口名**

```java
PresentService.addClient(int clientID)
```

- **服务内容**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**

```java
PresentService.addCommodity(int commodityID,  int number)
```

- **服务内容**
    - commodityID重复时会覆盖原有的，其他情况下添加新的入库商品列表条目

---
- **接口名**

```java
PresentService.removeCommodiity(int commodityID)
```

- **服务内容**
    - 在单据的商品列表里删除这个商品条目

---
- **接口名**

```java
PresentService.save( )
```

- **服务内容**
    - 将单据标记为草稿并存入数据库

---
- **接口名**

```java
PresentService.submit()
```

- **服务内容**
    - 将单据标记为已提交并存入数据库

---
- **接口名**

```java
PresentService.find(PresentReceiptFilter filter)
```

- **服务内容**
    - 返回所有满足条件的单据

---
- **接口名**

```java
PresentService.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X SaleReturnService 模块的接口规范

### `供接口`
- **接口名**
    - getSaleReturnReceipt
- **语法**

```java
public SaleReturnReceiptVO getSaleReturnReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public SaleReturnReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addClient
- **语法**

```java
public SaleReturnReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addSalesman
- **语法**

```java
public SaleReturnReceiptVO addSalesman(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加业务员

---
- **接口名**
    - addWarehouse
- **语法**

```java
public SaleReturnReceiptVO addWarehouse(String warehouse)
```

- **前置条件**
    - 无
- **后置条件**
    - 添加仓库属性

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public SaleReturnReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - setComment
- **语法**

```java
public SaleReturnReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - save
- **语法**

```java
public SaleReturnReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public SaleReturnReceiptVO submit()
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - find
- **语法**

```java
public List<SaleReturnReceiptVO> find(SaleReturnReceiptFilter filter)
```

- **前置条件**
    - 传入一个筛选条件
- **后置条件**
    - 返回所有满足条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public SaleReturnReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - trig
- **语法**

```java
public SaleReturnReceiptVO trig(SaleReturnReceiptVO saleReturnReceipt) throws InsufficientException
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public SaleReturnReceiptVO write(SaleReturnReceiptVO saleReturnReceipt)
```

- **前置条件**
    - 向数据层发送一个SaleReturnReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public SaleReturnReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public SaleReturnReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public SaleReturnReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public SaleReturnReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public SaleReturnReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
ClientService.findClientByID(int ID)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
SaleReturnController.add(SaleReturnReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
SaleReturnController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
SaleReturnController.update(SaleReturnReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
SaleReturnController.find(SaleReturnReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
SaleReturnController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X PurchaseService 模块的接口规范

### `供接口`
- **接口名**
    - getPurchaseReceipt
- **语法**

```java
public PurchaseReceiptVO getPurchaseReceipt( )
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PurchaseReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清空service所持有的VO里的内容，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addClient
- **语法**

```java
public PurchaseReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public PurchaseReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - setComment
- **语法**

```java
public PurchaseReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - find
- **语法**

```java
public List<PurchaseVO> find(PurchaseReceiptFilter filter)
```

- **前置条件**
    - 传入查找条件
- **后置条件**
    - 返回所有符合条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public PurchaseReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - save
- **语法**

```java
public PurchaseReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReceiptVO submit()
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - trig
- **语法**

```java
public PurchaseReceiptVO trig(PurchaseReceiptVO PurchaseReceipt)
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public PurchaseReceiptVO write(PurchaseReceiptVO PurchaseReceipt)
```

- **前置条件**
    - 向数据层发送一个PurchaseReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public PurchaseReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PurchaseReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public PurchaseReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PurchaseReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PurchaseReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
ClientService.findClientByID(int ID)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
PurchaseController.add(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
PurchaseController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
PurchaseController.update(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
PurchaseController.find(PurchaseReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
PurchaseController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X PurchaseReturnService 模块的接口规范

### `供接口`
- **接口名**
    - getPurchaseReturnReceipt
- **语法**

```java
public PurchaseReturnReceiptVO getPurchaseReturnReceipt( )
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PurchaseReturnReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清空service所持有的VO里的内容，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addClient
- **语法**

```java
public PurchaseReturnReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO addCommodityListItem(CommodityListItemVO commodityListItemVO)
```

- **前置条件**
    - 无
- **后置条件**
    - CommodityID重复时会覆盖原有的，其他情况下添加新的商品条目

---
- **接口名**
    - removeCommodityListItem
- **语法**

```java
public PurchaseReturnReceiptVO removeCommodityListItem(int index)
```

- **前置条件**
    - 无
- **后置条件**
    - 在商品列表里面删除这条账目

---
- **接口名**
    - setComment
- **语法**

```java
public PurchaseReturnReceiptVO setComment(String comment)
```

- **前置条件**
    - 无
- **后置条件**
    - 设置单据备注

---
- **接口名**
    - find
- **语法**

```java
public List<PurchaseReturnVO> find(PurchaseReturnFilter filter)
```

- **前置条件**
    - 传入查找条件
- **后置条件**
    - 返回所有符合条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public PurchaseReturnReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - save
- **语法**

```java
public PurchaseReturnReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public PurchaseReturnReceiptVO submit()
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - trig
- **语法**

```java
public PurchaseReturnReceiptVO trig(PurchaseReturnReceiptVO PurchaseReceipt)
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public PurchaseReturnReceiptVO write(PurchaseReturnReceiptVO PurchaseReceipt)
```

- **前置条件**
    - 向数据层发送一个SaleReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public PurchaseReturnReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PurchaseReturnReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public PurchaseReturnReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PurchaseReturnReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PurchaseReturnReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
ClientService.findClientByID(int ID)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
PurchaseReturnController.add(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
PurchaseReturnController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
PurchaseReturnController.update(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
PurchaseReturnController.find(PurchaseReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
PurchaseReturnController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X UnderflowService 模块的接口规范

### `供接口`
- **接口名**
    - getUnderflowReceipt
- **语法**

```java
public UnderflowReceiptVO getUnderflowReceipt( )
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public UnderflowReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清空service所持有的VO里的内容，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addCommodity
- **语法**

```java
public UnderflowReceiptVO addCommodity(int commodityID, int number)
```

- **前置条件**
    - 传入报损的商品编号和数量（报损时为负）
- **后置条件**
    - 在报损单中加入商品

---
- **接口名**
    - removeCommodity
- **语法**

```java
public UnderflowReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 传入要删除的商品ID
- **后置条件**
    - 从单据中移除此商品

---
- **接口名**
    - find
- **语法**

```java
public List<UnderflowReceiptVO> find(UnderflowFilter filter)
```

- **前置条件**
    - 传入查找条件
- **后置条件**
    - 返回所有符合条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public UnderflowReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - save
- **语法**

```java
public UnderflowReceiptVO save()
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public UnderflowReceiptVO submit()
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - trig
- **语法**

```java
public UnderflowReceiptVO trig(UnderflowReceiptVO UnderflowReceipt)
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public UnderflowReceiptVO write(UnderflowReceiptVO UnderflowReceipt)
```

- **前置条件**
    - 向数据层发送一个SaleReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public UnderflowReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public UnderflowReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public UnderflowReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public UnderflowReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public UnderflowReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
UnderflowController.add(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
UnderflowController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
UnderflowController.update(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
UnderflowController.find(PurchaseReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
UnderflowController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X OverflowService 模块的接口规范

### `供接口`
- **接口名**
    - getOverflowReceipt
- **语法**

```java
public OverflowReceiptVO getOverflowReceipt( )
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public OverflowReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清空service所持有的VO里的内容，如果之前的单据是草稿状态，从数据库中删除这个草稿

---
- **接口名**
    - addCommodity
- **语法**

```java
public OverflowReceiptVO addCommodity(int commodityID, int number)
```

- **前置条件**
    - 传入报溢的商品编号和数量（报损时为负）
- **后置条件**
    - 在报溢单中加入商品

---
- **接口名**
    - removeCommodity
- **语法**

```java
public OverflowReceiptVO removeCommodity(int commodityID)
```

- **前置条件**
    - 传入要删除的商品ID
- **后置条件**
    - 从单据中移除此商品

---
- **接口名**
    - find
- **语法**

```java
public List<OverflowReceiptVO> find(OverflowReceiptFilter filter)
```

- **前置条件**
    - 传入查找条件
- **后置条件**
    - 返回所有符合条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public OverflowReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - save
- **语法**

```java
public OverflowReceiptVO save()
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public OverflowReceiptVO submit()
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - trig
- **语法**

```java
public OverflowReceiptVO trig(OverflowReceiptVO OverflowReceipt)
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public OverflowReceiptVO write(OverflowReceiptVO OverflowReceipt)
```

- **前置条件**
    - 向数据层发送一个SaleReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public OverflowReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public OverflowReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public OverflowReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public OverflowReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public OverflowReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
OverflowController.add(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
OverflowController.delete(String receiptID)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
OverflowController.update(PurchaseReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
OverflowController.find(PurchaseReceiptFilter filter)
```

- **服务内容**
    - 查找单据

---
- **接口名**

```java
OverflowController.findByID(String receiptID)
```

- **服务内容**
    - 返回对应单据编号的单据

---
<!-------------------------------->
##### 5.X.X.X PresentService 模块的接口规范

### `供接口`
- **接口名**
    - getPresentReceipt
- **语法**

```java
public PresentReceiptVO getPresentReceipt()
```

- **前置条件**
    - service已经正确初始化，持有上一次保存的单据草稿或全新单据
- **后置条件**
    - 返回这张单据的VO

---
- **接口名**
    - clear
- **语法**

```java
public PresentReceiptVO clear()
```

- **前置条件**
    - 无
- **后置条件**
    - 清理草稿单，新建一个VO

---
- **接口名**
    - addClient
- **语法**

```java
public PresentReceiptVO addClient(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 为这张单据增加客户，如果之前已经有客户，则覆盖原有客户

---
- **接口名**
    - addCommodity
- **语法**

```java
public PresentReceiptVO addCommodity(int commodityID,  int number)
```

- **前置条件**
    - 无
- **后置条件**
    - commodityID重复时会覆盖原有的，其他情况下添加新的入库商品列表条目

---
- **接口名**
    - removeCommodiity
- **语法**

```java
public PresentReceiptVO removeCommodiity(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 在单据的商品列表里删除这个商品条目

---
- **接口名**
    - save
- **语法**

```java
public PresentReceiptVO save( )
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据标记为草稿并存入数据库

---
- **接口名**
    - submit
- **语法**

```java
public PresentReceiptVO submit()
```

- **前置条件**
    - 所有字段已正确（参见需求规格说明）填写
- **后置条件**
    - 将单据标记为已提交并存入数据库

---
- **接口名**
    - find
- **语法**

```java
public List<PresentReceiptVO> find(PresentReceiptFilter filter)
```

- **前置条件**
    - 传入一个筛选条件
- **后置条件**
    - 返回所有满足条件的单据

---
- **接口名**
    - findByID
- **语法**

```java
public PresentReceiptVO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回对应单据编号的单据

---
- **接口名**
    - trig
- **语法**

```java
public PresentReceiptVO trig(PresentReceiptVO PresentReceipt)
```

- **前置条件**
    - 使一张单据生效（调用多个writer）
- **后置条件**
    - 返回生效的单据

---
- **接口名**
    - write
- **语法**

```java
public PresentReceiptVO write(PresentReceiptVO PresentReceipt)
```

- **前置条件**
    - 向数据层发送一个SaleReceiptPO
- **后置条件**
    - 返回刚刚写入数据层的VO

---
- **接口名**
    - redo
- **语法**

```java
public PresentReceiptVO redo(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 红冲的单据VO（已经取反）

---
- **接口名**
    - redoAndDuplicate
- **语法**

```java
public PresentReceiptVO redoAndDuplicate(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 复制的单据VO（和原有一样），此时已经红冲了这张单据

---
- **接口名**
    - pass
- **语法**

```java
public PresentReceiptVO pass(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为通过

---
- **接口名**
    - fail
- **语法**

```java
public PresentReceiptVO fail(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 将单据状态标为不通过

---
- **接口名**
    - edit
- **语法**

```java
public PresentReceiptVO edit(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 审批时开始修改单据内容

---
### `需接口`
- **接口名**

```java
CommodityService.updateCommodity(CommodityVO commodity)
```

- **服务内容**
    - 更新商品

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 系统返回找到的符合规则的商品

---
- **接口名**

```java
ClientService.findClientByID(int ID)
```

- **服务内容**
    - 系统返回找到的符合规则的客户

---
- **接口名**

```java
ClientService.updateClient(ClientVO clientVO)
```

- **服务内容**
    - 更新客户信息

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
- **接口名**

```java
PresentController.add(PresentReceiptPO receiptPO)
```

- **服务内容**
    - 增加单据

---
- **接口名**

```java
PresentController.delete(String receiptNumber)
```

- **服务内容**
    - 删除单据

---
- **接口名**

```java
PresentController.update(PresentReceiptPO receiptPO)
```

- **服务内容**
    - 修改单据

---
- **接口名**

```java
PresentController.find(PresentReceiptPOFilter receiptPOFilter)
```

- **服务内容**
    - 查找单据

---
<!-------------------------------->
##### 5.X.X.X CommodityService 模块的接口规范

### `需接口`
- **接口名**

```java
List<CommodityVO>.findCommodityVO(CommodityFilter filter)
```

- **服务内容**
    - 

---
- **接口名**

```java
CommodityVO.addCommodity(CommodityVO commodity) throws DuplicateException
```

- **服务内容**
    - 

---
- **接口名**

```java
CommodityVO.updateCommodity(CommodityVO commodity) throws NotFoundException
```

- **服务内容**
    - 

---
- **接口名**

```java
CommodityVO.deleteCommodity(int id) throws Undeletable,NotFoundException
```

- **服务内容**
    - 

---
- **接口名**

```java
CommodityVO.findCommodityByID(int commodityID)
```

- **服务内容**
    - 

---
### `需接口`
- **接口名**

```java
CommodityController.add(CommodityPO commodity)
```

- **服务内容**
    - 增加商品

---
- **接口名**

```java
CommodityController.delete(int CommodityID)
```

- **服务内容**
    - 删除商品

---
- **接口名**

```java
CommodityController.update(CommodityPO commodity)
```

- **服务内容**
    - 更新商品信息

---
- **接口名**

```java
CommodityController.find(CommodityPOFilter filter)
```

- **服务内容**
    - 用于查找商品

---
- **接口名**

```java
CommodityController.findByID(int commodityID)
```

- **服务内容**
    - 查找编号对应的商品

---
<!-------------------------------->
##### 5.X.X.X CommodityCategoryService 模块的接口规范

### `供接口`
- **接口名**
    - findByID
- **语法**

```java
public CommodityCategoryVO findByID(int commodityCategoryID)
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回编号对应的商品分类

---
- **接口名**
    - getCommodityCategory
- **语法**

```java
public CommodityCategoryVO getCommodityCategory(CommodityCategoryVO parent)
```

- **前置条件**
    - 传入某一分类以获取其子分类
- **后置条件**
    - 系统返回某一分类的子分类

---
- **接口名**
    - getCommodityCategory
- **语法**

```java
public CommodityCategoryVO getCommodityCategory()
```

- **前置条件**
    - 无
- **后置条件**
    - 系统返回所有商品分类

---
- **接口名**
    - addCommodityCategory
- **语法**

```java
public CommodityCategoryVO addCommodityCategory(CommodityCategoryVO category) throws DuplicateException
```

- **前置条件**
    - 传入的需要添加的分类不能与当前目录下的分类重复
- **后置条件**
    - 系统添加此分类

---
- **接口名**
    - updateCommodityCategory
- **语法**

```java
public CommodityCategoryVO updateCommodityCategory(CommodityCategoryVO category) throws NotFoundException
```

- **前置条件**
    - 传入的需要更新的分类必须已经存在于目标目录下
- **后置条件**
    - 系统更新分类信息

---
- **接口名**
    - deleteCommodityCategory
- **语法**

```java
public boolean deleteCommodityCategory(int id) throws Undeletable,NotFoundException
```

- **前置条件**
    - 传入的待删除分类必须没有子分类或商品且必须存在
- **后置条件**
    - 系统删除此分类

---
### `需接口`
- **接口名**

```java
CommodityCategoryController.find(CommodityCategoryFilter filter)
```

- **服务内容**
    - 查找分类

---
- **接口名**

```java
CommodityCategoryController.findbyID(int commodityCategoryID)
```

- **服务内容**
    - 查找编号对应的商品分类

---
- **接口名**

```java
CommodityCategoryController.add(CommodityCategoryPO category)
```

- **服务内容**
    - 增加分类

---
- **接口名**

```java
CommodityCategoryController.update(CommodityCategoryPO category)
```

- **服务内容**
    - 更新分类

---
- **接口名**

```java
CommodityCategoryController.delete(int categoryID)
```

- **服务内容**
    - 删除分类

---
- **接口名**

```java
CommodityController.findByID(int commodityID)
```

- **服务内容**
    - 查找编号对应的商品

---
<!-------------------------------->
##### 5.X.X.X BankAccountService 模块的接口规范

### `供接口`
- **接口名**
    - addAccount
- **语法**

```java
public BankAccountVO addAccount(BankAccountVO bankAccount) throws DuplicateException
```

- **前置条件**
    - 传入的需要添加的账户不能与已有账户重复
- **后置条件**
    - 系统将此账户增加至银行账户列表中

---
- **接口名**
    - deleteAccount
- **语法**

```java
public BankAccountVO deleteAccount(String bankAccountID) throws UndeletableException,NotFoundException 
```

- **前置条件**
    - 传入的需要删除的账户ID不能产生交易记录且必须存在
- **后置条件**
    - 系统删除账户

---
- **接口名**
    - updateAccount
- **语法**

```java
public BankAccountVO updateAccount(BankAccountVO bankAccount) throws DuplicateException
```

- **前置条件**
    - 传入的需要添加的账户不能与已有账户重复
- **后置条件**
    - 系统将此账户增加至银行账户列表中

---
- **接口名**
    - findAccount
- **语法**

```java
public List<AccountVO> findAccount(BankAccountFilter filter)
```

- **前置条件**
    - 按filter查找符合条件的账户
- **后置条件**
    - 返回符合条件的银行账户

---
- **接口名**
    - findByID
- **语法**

```java
public BankAccountVO findByID(String accountID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回编号对应的银行账户

---
### `需接口`
- **接口名**

```java
BankAccountController.add(BankAccountPO account)
```

- **服务内容**
    - 新增账户

---
- **接口名**

```java
BankAccountController.delete(String bankAccountID)
```

- **服务内容**
    - 删除账户

---
- **接口名**

```java
BankAccountController.update(BankAccountPO account)
```

- **服务内容**
    - 更新账户信息

---
- **接口名**

```java
BankAccountController.find(BankAccountFilter filter)
```

- **服务内容**
    - 查找银行账户

---
- **接口名**

```java
BankAccountController.findByID(String bankAccountID)
```

- **服务内容**
    - 查找编号对应的银行账户

---
<!-------------------------------->
##### 5.X.X.X ClientService  模块的接口规范

### `供接口`
- **接口名**
    - addClient
- **语法**

```java
public ClientVO  addClient(ClientVO client) throws DuplicateException 
```

- **前置条件**
    - client的编号不能与已有客户重复
- **后置条件**
    - 系统创建新的客户

---
- **接口名**
    - updateClient
- **语法**

```java
public ClientVO  updateClient(ClientVO client) throws NotFoundException 
```

- **前置条件**
    - 客户必须已经存在
- **后置条件**
    - 系统更新客户信息

---
- **接口名**
    - findClient
- **语法**

```java
public List<ClientVO> findClient(ClientFilter filter)
```

- **前置条件**
    - 需要传入filter作为筛选条件
- **后置条件**
    - 系统返回找到的符合规则的客户

---
- **接口名**
    - deleteClient
- **语法**

```java
public ClientVO  deleteClient(int id) throws UndeletableException,NotFoundException 
```

- **前置条件**
    - 需要删除的客户必须没有产生任何单据且必须存在，以ID指定客户
- **后置条件**
    - 系统删除客户

---
- **接口名**
    - findClientByID
- **语法**

```java
public ClientVO  findClientByID(int ID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回编号对应的客户

---
### `需接口`
- **接口名**

```java
ClientController.add(ClientPO client)
```

- **服务内容**
    - 新增客户

---
- **接口名**

```java
ClientController.update(ClientPO client)
```

- **服务内容**
    - 更新客户

---
- **接口名**

```java
ClientController.find(ClientPOFilter filter)
```

- **服务内容**
    - 筛选符合要求的客户

---
- **接口名**

```java
ClientController.delete(int clientID)
```

- **服务内容**
    - 删除客户

---
- **接口名**

```java
ClientController.findByID(int clientID)
```

- **服务内容**
    - 查找编号对应的客户

---
- **接口名**

```java
UserService.findUserByID(int userID)
```

- **服务内容**
    - 查找编号对应的业务员

---
<!-------------------------------->
##### 5.X.X.X UserService 模块的接口规范

### `供接口`
- **接口名**
    - login
- **语法**

```java
public String login(String username,String password) throws AuthorizationException 
```

- **前置条件**
    - 输入的username必须已经被添加至系统中且还未登录，password为加密后的正确密码，否则将抛出异常
- **后置条件**
    - 系统返回此用户的身份token

---
- **接口名**
    - isValid
- **语法**

```java
public boolean isValid(int userID, String token)
```

- **前置条件**
    - 无
- **后置条件**
    - 判断用户登录是否有效

---
- **接口名**
    - getIdentityInfo
- **语法**

```java
public UserVO  getIdentityInfo(String token) throws AuthorizationException 
```

- **前置条件**
    - 传入的token必须为已经登录过的用户，password为加密后的正确密码
- **后置条件**
    - 系统返回的VO中仅包括身份和权限

---
- **接口名**
    - changePassword
- **语法**

```java
public UserVO  changePassword(String username, String oriPassword, String newPassword) throws AuthorizationException 
```

- **前置条件**
    - username与oriPassword为用户名和加密后原有密码，newPassword为加密后新密码
- **后置条件**
    - 系统修改用户密码

---
- **接口名**
    - updateUser
- **语法**

```java
public UserVO  updateUser(UserVO user) throws NotFoundException 
```

- **前置条件**
    - 传入的需要更新的user必须已经存在
- **后置条件**
    - 系统更新user信息

---
- **接口名**
    - addUser
- **语法**

```java
public UserVO  addUser(UserVO user) throws DuplicateException
```

- **前置条件**
    - 传入的需要增加的用户用户名不能与原有用户重复
- **后置条件**
    - 系统增加user

---
- **接口名**
    - getUser
- **语法**

```java
public List<UserVO> getUser(UserFilter filter)
```

- **前置条件**
    - 传入filter来筛选符合条件的用户
- **后置条件**
    - 返回符合条件的用户

---
- **接口名**
    - findUserByID
- **语法**

```java
public UserVO  findUserByID(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 返回编号对应的用户

---
### `需接口`
- **接口名**

```java
userController.findByID(int userID)
```

- **服务内容**
    - 查找指定编号用户

---
- **接口名**

```java
userController.find(UserFilter filter)
```

- **服务内容**
    - 搜索符合条件的用户

---
- **接口名**

```java
userController.updateUser(UserPO user)
```

- **服务内容**
    - 更新用户信息（身份和权限）

---
- **接口名**

```java
userController.addUser(UserPO user)
```

- **服务内容**
    - 新增用户

---
<!-------------------------------->
##### 5.X.X.X PromotionService  模块的接口规范

### `供接口`
- **接口名**
    - getCommodity
- **语法**

```java
public CommodityCategoryVO getCommodity()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有的商品

---
- **接口名**
    - addPromotion
- **语法**

```java
public CommodityPromotionVO addPromotion(CommodityPromotionVO promotion)
```

- **前置条件**
    - 无
- **后置条件**
    - 新增一种商品组合优惠

---
- **接口名**
    - addPromotion
- **语法**

```java
public TotalPromotionVO addPromotion(TotalPromotionVO promotion)
```

- **前置条件**
    - 无
- **后置条件**
    - 新增一种总额优惠

---
- **接口名**
    - addPromotion
- **语法**

```java
public VIPPromotionVO addPromotion(VIPPromotionVO promotion)
```

- **前置条件**
    - 无
- **后置条件**
    - 新增一种VIP优惠

---
- **接口名**
    - updatePromotion
- **语法**

```java
public CommodityPromotionVO updatePromotion(CommodityPromotionVO promotion) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新一种未生效的商品组合优惠

---
- **接口名**
    - updatePromotion
- **语法**

```java
public TotalPromotionVO updatePromotion(TotalPromotionVO promotion) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新一种未生效的总额优惠

---
- **接口名**
    - updatePromotion
- **语法**

```java
public VIPPromotionVO updatePromotion(VIPPromotionVO promotion) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 更新一种未生效的VIP优惠

---
- **接口名**
    - deletePromotion
- **语法**

```java
public boolean deletePromotion(String promotionID) throws UndeletableException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除一种未生效的促销策略

---
- **接口名**
    - findCommodityPromotion
- **语法**

```java
public List<CommodityPromotionVO> findCommodityPromotion()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有商品组合优惠

---
- **接口名**
    - findTotalPromotion
- **语法**

```java
public List<TotalPromotionVO> findTotalPromotion()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有总额优惠

---
- **接口名**
    - findVIPPromotion
- **语法**

```java
public List<VIPPromotionVO> findVIPPromotion()
```

- **前置条件**
    - 无
- **后置条件**
    - 返回所有VIP优惠

---
### `需接口`
- **接口名**

```java
NULL.()
```

- **服务内容**
    - 

---
<!-------------------------------->
##### 5.X.X.X OperationConditionService 模块的接口规范

### `供接口`
- **接口名**
    - getOperationCondition
- **语法**

```java
public OperationConditionVO getOperationCondition(TimeFilter filter)
```

- **前置条件**
    - 传入时间筛选经营情况
- **后置条件**
    - 返回传入时间的经营情况表

---
### `需接口`
- **接口名**

```java
SaleService.find(SaleReceiptFilter filter)
```

- **服务内容**
    - 返回符合条件的销售单

---
- **接口名**

```java
UnderflowService.find(UnderflowReceiptFilter filter)
```

- **服务内容**
    - 返回符合条件的报损单

---
- **接口名**

```java
OverflowService.find(OverflowReceiptFilter filter)
```

- **服务内容**
    - 返回符合条件的报溢单

---
- **接口名**

```java
PurchaseReturnService.find(PurchaseReturnReceiptFilter filter)
```

- **服务内容**
    - 返回符合条件的进货退货

---
- **接口名**

```java
PresentService.find(PresentReceiptFilter filter)
```

- **服务内容**
    - 返回符合条件的赠送单

---
- **接口名**

```java
CommodityService.findCommodityByID(int commodityID)
```

- **服务内容**
    - 返回编号对应的商品

---


### 5.4 数据层的分解

#### 5.4.1 数据层模块的职责

| 模块                            | 职责                                                                                                                                           |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| notificationController          | 提供与用户相关的通知                                                                                                                           |
| clientController                | 提供与客户相关的增删改查服务                                                                                                                   |
| commodityController             | 提供商品分类的增删改查，商品的增删改查、进货与退货、销售与退货、赠送服务，提供库存类单据、赠送单、库存报警单、进货类单据、销售类单据的查询服务 |
| authorizationController         | 提供用户的登录，增删改查服务                                                                                                                   |
| accountController               | 提供银行账户的增删查服务、收款、付款、现金报销服务，提供收款单、付款单、现金费用单的查询服务                                                   |
| operationRecordController       | 提供经营历程表的查看和导出服务，提供销售类单据、进货类单据、财务类单据、库存类单据的红冲和红冲并复制服务                                       |
| operationConditionController    | 提供经营状况表的查看和导出服务                                                                                                                 |
| saleDetailController            | 提供销售明细表的查看和导出服务                                                                                                                 |
| accountInitializationController | 提供期初建账和账目查询服务                                                                                                                     |
| promotionController             | 提供促销策略的增删改查服务                                                                                                                     |
| BLController                    | 向逻辑层提供数据服务                                                                                                                           |
| RMIUtility                      | 提供RMI服务的工具                                                                                                                              |
| userDAO                         | 提供用户的增删改查服务                                                                                                                         |
| clientDAO                       | 提供客户的增删改查服务                                                                                                                         |
| commodityDAO                    | 提供商品、商品分类、库存类单据、赠送单、库存报警单、进货类单据、销售类单据的增删改查服务                                                       |
| accountDAO                      | 提供银行账户、收款单、付款单、现金费用单的增删改查服务                                                                                         |
| promotionDAO                    | 提供促销策略的增删改查服务                                                                                                                     |
| notificationDAO                 | 提供通知的增删改查服务                                                                                                                         |
| systemAccount                   | 提供新建一套数据表、保存数据表、查看数据表的服务                                                                                               |

#### 5.4.2 数据层模块的接口规范

<!-------------------------------->
##### 5.X.X.X CollectionController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public CollectionReceiptPO add(CollectionReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public CollectionReceiptPO update(CollectionReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<CollectionReceiptPO> find(CollectionReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public CollectionReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X PaymentController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public PaymentReceiptPO add(PaymentReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public PaymentReceiptPO update(PaymentReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public <PaymentReceiptPOList> find(PaymentReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public PaymentReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X ReimbursementController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public ReimbursementReceiptPO add(ReimbursementReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public ReimbursementReceiptPO update(ReimbursementReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<ReimbursementReceiptPO> find(ReimbursementReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public ReimbursementReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X SaleController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public SaleReceiptPO add(SaleReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public SaleReceiptPO update(SaleReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<SaleReceiptPO> find(SaleReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public SaleReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X SaleReturnController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public SaleReturnReceiptPO add(SaleReturnReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public SaleReturnReceiptPO update(SaleReturnReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<SaleReturnReceiptPO> find(SaleReturnReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public SaleReturnReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X PurchaseController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public PurchaseReceiptPO add(PurchaseReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public PurchaseReceiptPO update(PurchaseReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<PurchaseReceiptPO> find(PurchaseReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public PurchaseReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X PurchaseReturnController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public PurchaseReturnReceiptPO add(PurchaseReturnReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public PurchaseReturnReceiptPO update(PurchaseReturnReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<PurchaseReturnReceiptPO> find(PurchaseReturnReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public PurchaseReturnReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X UnderflowController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public UnderflowReceiptPO add(UnderflowReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public UnderflowReceiptPO update(UnderflowReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<UnderflowReceiptPO> find(UnderflowReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public UnderflowReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X OverflowController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public OverflowReceiptPO add(OverflowReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public OverflowReceiptPO update(OverflowReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<OverflowReceiptPO> find(OverflowReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public OverflowReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X PresentController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public PresentReceiptPO add(PresentReceiptPO receiptPO) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加单据内容

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(String receiptID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除单据内容

---
- **接口名**
    - update
- **语法**

```java
public PresentReceiptPO update(PresentReceiptPO receiptPO) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改单据内容

---
- **接口名**
    - find
- **语法**

```java
public List<PresentReceiptPO> find(PresentReceiptPOFilter receiptPOFilter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public PresentReceiptPO findByID(String receiptID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X CommodityController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public CommodityPO add(CommodityPO commodity) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加商品

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(int commodityID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除商品

---
- **接口名**
    - update
- **语法**

```java
public CommodityPO update(CommodityPO commodity) throws NotFoundException,InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改商品

---
- **接口名**
    - find
- **语法**

```java
public List<CommodityPO> find(CommodityFileter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public CommodityPO findByID(int commodityID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X CommodityCategoryController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public CommodityCategoryPO add(CommodityCategoryPO category) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加商品分类

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(int catetgoryID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除商品分类

---
- **接口名**
    - update
- **语法**

```java
public CommodityCategoryPO update(CommodityCategoryPO category) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改商品分类

---
- **接口名**
    - find
- **语法**

```java
public List<CommodityCategoryPO> find(CommodityCategoryFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public CommodityCategoryPO findByID(int catetgoryID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X BankAccountController  模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public BankAccountPO add(BankAccountPO account) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加银行账户

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(int bankAccountID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除银行账户

---
- **接口名**
    - update
- **语法**

```java
public BankAccountPO update(BankAccountPO account) throws NotFoundException,InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改银行账户

---
- **接口名**
    - find
- **语法**

```java
public List<BankAccountPO> find(BankAccountFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public BankAccountPO findByID(int bankAccountID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X ClientController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public ClientPO add(ClientPO client) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加客户

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(int clientID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除客户

---
- **接口名**
    - update
- **语法**

```java
public ClientPO update(ClientPO client) throws NotFoundException,InsufficientException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改客户

---
- **接口名**
    - find
- **语法**

```java
public List<ClientPO> find(ClientFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public ClientPO findByID(int clientID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X AuthorizationController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public UserPO add(UserPO user) throws DuplicateException
```

- **前置条件**
    - 无
- **后置条件**
    - 增加用户

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(int userID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除用户

---
- **接口名**
    - update
- **语法**

```java
public UserPO update(UserPO user) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 修改用户

---
- **接口名**
    - find
- **语法**

```java
public List<UserPO> find(UserFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public UserPO findByID(int userID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X NotificationController 模块的接口规范

### `供接口`
- **接口名**
    - add
- **语法**

```java
public NotificationPO add(NotificationPO notification)
```

- **前置条件**
    - 单据审批通过或不通过，商品库存低于警戒线
- **后置条件**
    - 发送通知给相关用户

---
- **接口名**
    - delete
- **语法**

```java
public boolean delete(int notificationID) throws UndeletableException, NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 删除通知

---
- **接口名**
    - update
- **语法**

```java
public NotificationPO update(int notificationID) throws NotFoundException
```

- **前置条件**
    - 无
- **后置条件**
    - 将通知更改为已读

---
- **接口名**
    - find
- **语法**

```java
public List<NotificationPO> find(NotificationFilter filter)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
- **接口名**
    - findByID
- **语法**

```java
public NotificationPO findByID(int notificationID)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---
<!-------------------------------->
##### 5.X.X.X ReceiptDAO 模块的接口规范

### `供接口`
- **接口名**
    - findAll
- **语法**

```java
public List<ReceiptPO> findAll(Connection connection)
```

- **前置条件**
    - 无
- **后置条件**
    - 无

---

## 6. 信息视角

### 6.1 数据持久化对象
系统类的PO是对应的相关的实体类，在此做出简单定义
- **CommodityPO**为商品信息，包括商品编号，警戒值，名称，型号，库存数量，进价，零售价，最近进价，最近零售价，出厂日期

- **CommodityCategoryPO**为商品分类信息，包括商品分类编号，名称

- **NotificationPO**为消息，包括通知类型(报警、审批成功、审批失败、提示)，相关单据编号，被通知用户编号

- **BankAccountPO**为银行账户，包括账户名，账户密码，账户余额

- **ClientPO**为客户，包括编号，分类（进货商、销售商），级别（五级，一级普通用户，五级VIP客户），姓名，电话，地址，邮编，电子邮箱，应收额度，应收，应付，默认业务员，代金券金额数

- **UserPO**为系统用户，包括账号名，账号密码，账号类型(库存管理人员，进货销售人员，财务人员，总经理)，账号权限(普通权限，最高权限)

- **PresentReceiptPO**为库存赠送单，包括单据编号，商品的名称、型号、数量、进价，赠送对象，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **AboveReceiptPO**为报溢单，包括单据编号，实际数量，库存数量，商品名称，商品型号，商品进价，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **BelowReceiptPO**为报损单，包括单据编号，实际数量，库存数量，商品名称，商品型号，商品进价，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **AlertReceiptPO**为库存报警单，包括单据编号，商品编号，当前数量，警戒值

- **PurchaseReceiptPO**为进货单，包括单据编号，供应商，操作员，仓库，入库商品的编号、名称、型号、数量、进价、金额(单个商品)、商品备注，进货销售金额，备注，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **PurchaseReturnReceiptPO**为进货退货单，包括单据编号，供应商，操作员，仓库，入库商品的编号、名称、型号、数量、进价、金额(单个商品)、商品备注，进货销售金额，备注，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **SaleReceiptPO**为销售单，包括单据编号，客户编号，业务员，操作员，仓库，出货商品的编号、名称、型号、数量、销售价、金额(单个商品)、商品备注，折让前总额，折让，使用代金卷金额，折让后总额，备注，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **SaleReturnReceiptPO**为销售退货单，包括单据编号，客户编号，业务员，操作员，仓库，出货商品的编号、名称、型号、数量、销售价、金额(单个商品)、商品备注，折让前总额，折让，使用代金卷金额，折让后总额，备注，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **CollectionReceiptPO**为收款单，包括单据编号，银行账户，客户，操作员，转账金额，备注，总额汇总，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **PaymentReceiptPO**为付款单，包括单据编号，银行账户，客户，操作员，转账金额，备注，总额汇总，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **ReimbursementReceiptPO**为现金费用单，包括单据编号，操作员，银行账户，条目名，金额，备注，总额，提交状态(已提交，草稿)，审批状态(通过，不通过)

- **PromotionPO**为促销策略，包括客户优惠级别，优惠策略(赠品、价格折让、代金券)，开始时间，持续时间(单位为天)，组合商品列表，价格(根据所选择的商品组合动态生成原价)，触发总价，优惠后价格

### 6.2 数据库表
本系统使用数据库来存储文件，数据库表包含Commodity商品表，CommodityCategory商品分类表，StorageBrowse库存查看表，PresentReceipt库存赠送单表，StorageReceipt库存报溢/损单表，AlertReceipt库存报警单表，Client客户表，purchaseReceipt进货/进货退货单表，SaleReceipt销售/销售退货单表，CollectionReceipt收款单据表，PaymentReceipt付款单据表，ReimbursementReceipt现金费用单据表，BankAccount银行账户表，Account期初建账表，Promotion促销策略表，Notification通知表，User用户表

- **Commodity商品表**：负责记录商品信息，包括商品编号，警戒值，名称，型号，库存数量，进价，零售价，最近进价，最近零售价，出厂日期，所属分类编号，记录是否已产生交互

- **CommodityCategory商品分类表**：负责记录商品分类信息，包括商品分类编号，名称，记录是否已产生交互

- **StorageBrowse库存查看表**：负责记录一段时间内出/入库数量、进/出货销售金额与库存数量的合计，包括出库数量合计，入库数量合计，进货销售金额合计，出货销售金额合计，库存数量合计，起始时间，结束时间

- **PresentReceipt库存赠送单表**：负责记录库存赠送单的信息，包括单据编号，商品的名称、型号、数量、进价，赠送对象，提交状态(已提交，草稿)，单据所属类型(销售类、进货类、财务类、库存类)，提交时间，审批时间，审批人员

- **StorageReceipt库存报溢/损单表**：负责记录库存报溢/损单的信息，包括单据编号，记录单据报溢或报损，实际数量，库存数量，商品名称，商品型号，商品进价，提交状态(已提交，草稿)，单据所属类型(销售类、进货类、财务类、库存类)，提交时间，审批时间，审批人员

- **AlertReceipt库存报警单表**：负责记录库存报警单的信息，包括单据编号，商品编号，当前数量，警戒值，记录是否已查看，记录是否被忽略提醒

- **Client客户表**：负责记录客户信息，包括编号，分类（进货商、销售商），级别（五级，一级普通用户，五级VIP客户），姓名，电话，地址，邮编，电子邮箱，应收额度，应收，应付，默认业务员，代金券金额数(默认0)

- **purchaseReceipt进货/进货退货单表**：负责记录进货/进货退货单的信息，包括单据编号，供应商，操作员，仓库，入库商品的编号、名称、型号、数量、进价、金额(单个商品)、商品备注，进货销售金额，备注，单据类型(进货、进货退货)，提交状态(已提交，草稿)，单据所属功能类型(销售类、进货类、财务类、库存类)，单据所属财务类型(收入类、支出类)，提交时间，审批时间，审批人员

- **SaleReceipt销售/销售退货单表**：负责记录销售/销售退货单的信息，包括单据编号，客户编号，业务员，操作员，仓库，出货商品的编号、名称、型号、数量、销售价、金额(单个商品)、商品备注，折让前总额，折让，使用代金卷金额，折让后总额，备注，单据类型(销售、销售退货)，提交状态(已提交，草稿)，单据所属功能类型(销售类、进货类、财务类、库存类)，单据所属财务类型(收入类、支出类)，提交时间，审批时间，审批人员

- **CollectionReceipt收款单据表**：负责记录收款单的信息，包括单据编号，银行账户，客户，操作员，转账金额，备注，总额汇总，提交状态(已提交，草稿)，单据所属功能类型(销售类、进货类、财务类、库存类)，单据所属财务类型(收入类、支出类)，提交时间，审批时间，审批人员，审批状态(通过，不通过)

- **PaymentReceipt付款单据表**：负责记录付款单的信息，包括单据编号，银行账户，客户，操作员，转账金额，备注，总额汇总，提交状态(已提交，草稿)，单据所属功能类型(销售类、进货类、财务类、库存类)，单据所属财务类型(收入类、支出类)，提交时间，审批时间，审批人员，审批状态(通过，不通过)

- **ReimbursementReceipt现金费用单据表**：负责记录现金费用单的信息，包括单据编号，操作员，银行账户，条目名，金额，备注，总额，提交状态(已提交，草稿)，单据所属功能类型(销售类、进货类、财务类、库存类)，单据所属财务类型(收入类、支出类)，提交时间，审批时间，审批人员，审批状态(通过，不通过)

- **BankAccount银行账户表**:负责记录银行账户信息，包括账户名，账户密码，账户余额

- **Account期初建账表**：负责记录初期建账的信息，包括建账时间，商品信息，客户信息，银行账单信息，参见上面的商品表、客户表、银行账单表的定义

- **Promotion促销策略表**：负责记录促销策略的信息，包括客户优惠级别，优惠策略(赠品、价格折让、代金券)，开始时间，持续时间(单位为天)，组合商品列表，价格(根据所选择的商品组合动态生成原价)，触发总价，优惠后价格

- **Notification通知表**：负责记录各类通知的信息，包括相关单据编号，被通知用户编号，处理消息的用户编号，记录是否已读，通知时间，处理时间

- **User用户表**：负责记录系统用户，包括账号名，账号密码，账号类型(库存管理人员，进货销售人员，财务人员，总经理)，账号权限(普通权限，最高权限)
